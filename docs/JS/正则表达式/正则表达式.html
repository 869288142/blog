<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>正则表达式</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.44e103aa.css" as="style"><link rel="preload" href="/blog/assets/js/app.5b6b1d01.js" as="script"><link rel="preload" href="/blog/assets/js/53.d85ad874.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.5a21e63f.js"><link rel="prefetch" href="/blog/assets/js/100.57094e85.js"><link rel="prefetch" href="/blog/assets/js/101.dcb175cf.js"><link rel="prefetch" href="/blog/assets/js/102.3823d04f.js"><link rel="prefetch" href="/blog/assets/js/103.2eb1fd76.js"><link rel="prefetch" href="/blog/assets/js/104.619da661.js"><link rel="prefetch" href="/blog/assets/js/105.3c73e320.js"><link rel="prefetch" href="/blog/assets/js/106.99be533b.js"><link rel="prefetch" href="/blog/assets/js/107.d23f2b77.js"><link rel="prefetch" href="/blog/assets/js/108.ac8a69ef.js"><link rel="prefetch" href="/blog/assets/js/109.f8fd0443.js"><link rel="prefetch" href="/blog/assets/js/11.f715494b.js"><link rel="prefetch" href="/blog/assets/js/110.ddffe921.js"><link rel="prefetch" href="/blog/assets/js/111.7625becc.js"><link rel="prefetch" href="/blog/assets/js/112.1449afba.js"><link rel="prefetch" href="/blog/assets/js/113.ee273dcd.js"><link rel="prefetch" href="/blog/assets/js/114.138ef6ee.js"><link rel="prefetch" href="/blog/assets/js/115.6b46efac.js"><link rel="prefetch" href="/blog/assets/js/116.8e31eeab.js"><link rel="prefetch" href="/blog/assets/js/117.f38aa8c9.js"><link rel="prefetch" href="/blog/assets/js/118.da1130dc.js"><link rel="prefetch" href="/blog/assets/js/119.e9cbc715.js"><link rel="prefetch" href="/blog/assets/js/12.28647a6e.js"><link rel="prefetch" href="/blog/assets/js/120.e56b7d43.js"><link rel="prefetch" href="/blog/assets/js/121.92d4e722.js"><link rel="prefetch" href="/blog/assets/js/13.97aa79b5.js"><link rel="prefetch" href="/blog/assets/js/14.d4283697.js"><link rel="prefetch" href="/blog/assets/js/15.7e39e9d0.js"><link rel="prefetch" href="/blog/assets/js/16.c312fa0b.js"><link rel="prefetch" href="/blog/assets/js/17.f9f6e022.js"><link rel="prefetch" href="/blog/assets/js/18.980b7492.js"><link rel="prefetch" href="/blog/assets/js/19.ec1ac255.js"><link rel="prefetch" href="/blog/assets/js/2.44ee984b.js"><link rel="prefetch" href="/blog/assets/js/20.0aecaf7a.js"><link rel="prefetch" href="/blog/assets/js/21.bd54ad7c.js"><link rel="prefetch" href="/blog/assets/js/22.6bb0dabe.js"><link rel="prefetch" href="/blog/assets/js/23.8439d4a6.js"><link rel="prefetch" href="/blog/assets/js/24.7b404bfe.js"><link rel="prefetch" href="/blog/assets/js/25.7ae9a917.js"><link rel="prefetch" href="/blog/assets/js/26.203db517.js"><link rel="prefetch" href="/blog/assets/js/27.2faf12de.js"><link rel="prefetch" href="/blog/assets/js/28.3b0e2745.js"><link rel="prefetch" href="/blog/assets/js/29.ce48b0e6.js"><link rel="prefetch" href="/blog/assets/js/3.380a2e70.js"><link rel="prefetch" href="/blog/assets/js/30.5dce9632.js"><link rel="prefetch" href="/blog/assets/js/31.cf8fe345.js"><link rel="prefetch" href="/blog/assets/js/32.0e93ca11.js"><link rel="prefetch" href="/blog/assets/js/33.719c321a.js"><link rel="prefetch" href="/blog/assets/js/34.f4b35b84.js"><link rel="prefetch" href="/blog/assets/js/35.c8ea5902.js"><link rel="prefetch" href="/blog/assets/js/36.3ba96a2c.js"><link rel="prefetch" href="/blog/assets/js/37.6cfe9a0a.js"><link rel="prefetch" href="/blog/assets/js/38.98088493.js"><link rel="prefetch" href="/blog/assets/js/39.7ad82ab5.js"><link rel="prefetch" href="/blog/assets/js/4.65229944.js"><link rel="prefetch" href="/blog/assets/js/40.ff2c81c9.js"><link rel="prefetch" href="/blog/assets/js/41.1d6e740c.js"><link rel="prefetch" href="/blog/assets/js/42.d60665b3.js"><link rel="prefetch" href="/blog/assets/js/43.a912868e.js"><link rel="prefetch" href="/blog/assets/js/44.b0778a55.js"><link rel="prefetch" href="/blog/assets/js/45.ad82c59c.js"><link rel="prefetch" href="/blog/assets/js/46.f094eed7.js"><link rel="prefetch" href="/blog/assets/js/47.cc429006.js"><link rel="prefetch" href="/blog/assets/js/48.de00de3a.js"><link rel="prefetch" href="/blog/assets/js/49.a034df67.js"><link rel="prefetch" href="/blog/assets/js/5.79b1724a.js"><link rel="prefetch" href="/blog/assets/js/50.a88fc498.js"><link rel="prefetch" href="/blog/assets/js/51.5e202253.js"><link rel="prefetch" href="/blog/assets/js/52.f8d62b39.js"><link rel="prefetch" href="/blog/assets/js/54.2eb31c13.js"><link rel="prefetch" href="/blog/assets/js/55.1b36a022.js"><link rel="prefetch" href="/blog/assets/js/56.d8464b27.js"><link rel="prefetch" href="/blog/assets/js/57.a1dd61af.js"><link rel="prefetch" href="/blog/assets/js/58.34d842fc.js"><link rel="prefetch" href="/blog/assets/js/59.887b2e1b.js"><link rel="prefetch" href="/blog/assets/js/6.911336b8.js"><link rel="prefetch" href="/blog/assets/js/60.2bc1ea38.js"><link rel="prefetch" href="/blog/assets/js/61.0fff8a14.js"><link rel="prefetch" href="/blog/assets/js/62.49204d9e.js"><link rel="prefetch" href="/blog/assets/js/63.fd1d38eb.js"><link rel="prefetch" href="/blog/assets/js/64.e6070422.js"><link rel="prefetch" href="/blog/assets/js/65.69e8b76c.js"><link rel="prefetch" href="/blog/assets/js/66.afa0bf3b.js"><link rel="prefetch" href="/blog/assets/js/67.20648109.js"><link rel="prefetch" href="/blog/assets/js/68.893ffbd6.js"><link rel="prefetch" href="/blog/assets/js/69.a5f091a8.js"><link rel="prefetch" href="/blog/assets/js/7.8b59da69.js"><link rel="prefetch" href="/blog/assets/js/70.83bc2d91.js"><link rel="prefetch" href="/blog/assets/js/71.b71506fa.js"><link rel="prefetch" href="/blog/assets/js/72.26362448.js"><link rel="prefetch" href="/blog/assets/js/73.82df4e7c.js"><link rel="prefetch" href="/blog/assets/js/74.3ad3c818.js"><link rel="prefetch" href="/blog/assets/js/75.e904e6ac.js"><link rel="prefetch" href="/blog/assets/js/76.f5fa7867.js"><link rel="prefetch" href="/blog/assets/js/77.ef3a8536.js"><link rel="prefetch" href="/blog/assets/js/78.2e20e5e6.js"><link rel="prefetch" href="/blog/assets/js/79.deb4cbc5.js"><link rel="prefetch" href="/blog/assets/js/8.a4d72886.js"><link rel="prefetch" href="/blog/assets/js/80.3e4ad3e2.js"><link rel="prefetch" href="/blog/assets/js/81.d1888782.js"><link rel="prefetch" href="/blog/assets/js/82.34f11fa7.js"><link rel="prefetch" href="/blog/assets/js/83.41007a5d.js"><link rel="prefetch" href="/blog/assets/js/84.7193e06e.js"><link rel="prefetch" href="/blog/assets/js/85.a85561e7.js"><link rel="prefetch" href="/blog/assets/js/86.4bb2d4eb.js"><link rel="prefetch" href="/blog/assets/js/87.98546ac7.js"><link rel="prefetch" href="/blog/assets/js/88.c268a23e.js"><link rel="prefetch" href="/blog/assets/js/89.207af623.js"><link rel="prefetch" href="/blog/assets/js/9.be7f9156.js"><link rel="prefetch" href="/blog/assets/js/90.e481a0be.js"><link rel="prefetch" href="/blog/assets/js/91.0a92026d.js"><link rel="prefetch" href="/blog/assets/js/92.ce862267.js"><link rel="prefetch" href="/blog/assets/js/93.e20cd801.js"><link rel="prefetch" href="/blog/assets/js/94.e2932049.js"><link rel="prefetch" href="/blog/assets/js/95.363ad948.js"><link rel="prefetch" href="/blog/assets/js/96.f7ff2d46.js"><link rel="prefetch" href="/blog/assets/js/97.055d8361.js"><link rel="prefetch" href="/blog/assets/js/98.baae9bee.js"><link rel="prefetch" href="/blog/assets/js/99.040a5543.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.44e103aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/browser/" class="nav-link">browser</a></li><li class="dropdown-item"><!----> <a href="/blog/HTTP/" class="nav-link">HTTP</a></li><li class="dropdown-item"><!----> <a href="/blog/HTML/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/blog/CSS/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/" class="nav-link router-link-active">JS</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/" class="nav-link">Vue</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/browser/" class="nav-link">browser</a></li><li class="dropdown-item"><!----> <a href="/blog/HTTP/" class="nav-link">HTTP</a></li><li class="dropdown-item"><!----> <a href="/blog/HTML/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/blog/CSS/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/blog/JS/" class="nav-link router-link-active">JS</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/" class="nav-link">Vue</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>环境</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>类型</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>类型转换</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>变量</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>词法</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>语法</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>作用域</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>函数</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>对象</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>类</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>模块</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>异步</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>正则表达式</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/blog/JS/正则表达式/正则表达式.html" class="active sidebar-link">正则表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/JS/正则表达式/正则表达式.html#匹配字符" class="sidebar-link">匹配字符</a></li><li class="sidebar-sub-header"><a href="/blog/JS/正则表达式/正则表达式.html#位置匹配" class="sidebar-link">位置匹配</a></li><li class="sidebar-sub-header"><a href="/blog/JS/正则表达式/正则表达式.html#元字符转义问题" class="sidebar-link">元字符转义问题</a></li><li class="sidebar-sub-header"><a href="/blog/JS/正则表达式/正则表达式.html#匹配行为-贪婪匹配和惰性匹配" class="sidebar-link">匹配行为-贪婪匹配和惰性匹配</a></li><li class="sidebar-sub-header"><a href="/blog/JS/正则表达式/正则表达式.html#多选分支" class="sidebar-link">多选分支</a></li><li class="sidebar-sub-header"><a href="/blog/JS/正则表达式/正则表达式.html#括号" class="sidebar-link">括号</a></li><li class="sidebar-sub-header"><a href="/blog/JS/正则表达式/正则表达式.html#操作符优先级" class="sidebar-link">操作符优先级</a></li><li class="sidebar-sub-header"><a href="/blog/JS/正则表达式/正则表达式.html#正则表达式可视化" class="sidebar-link">正则表达式可视化</a></li><li class="sidebar-sub-header"><a href="/blog/JS/正则表达式/正则表达式.html#正则表达式修饰符" class="sidebar-link">正则表达式修饰符</a></li><li class="sidebar-sub-header"><a href="/blog/JS/正则表达式/正则表达式.html#正则表达式编程" class="sidebar-link">正则表达式编程</a></li><li class="sidebar-sub-header"><a href="/blog/JS/正则表达式/正则表达式.html#正则表达式的构建" class="sidebar-link">正则表达式的构建</a></li><li class="sidebar-sub-header"><a href="/blog/JS/正则表达式/正则表达式.html#实践" class="sidebar-link">实践</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>错误处理</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="正则表达式"><a href="#正则表达式" aria-hidden="true" class="header-anchor">#</a> 正则表达式</h1> <p>正则表达式本身是一种<strong>匹配模式</strong>，用计算机语言来描述我们需要匹配到的结构</p> <h1 id="正则表达式语法"><a href="#正则表达式语法" aria-hidden="true" class="header-anchor">#</a> 正则表达式语法</h1> <p>正则表达式从匹配形式来说，<strong>要么匹配字符，要么匹配位置，以下从分别这两点展开学习</strong></p> <h2 id="匹配字符"><a href="#匹配字符" aria-hidden="true" class="header-anchor">#</a> 匹配字符</h2> <h3 id="横向模糊匹配"><a href="#横向模糊匹配" aria-hidden="true" class="header-anchor">#</a> 横向模糊匹配</h3> <p>正则匹配到的字符串是不固定的 可以使用量词来指定片段出现的次数，次数会影响到字符串的长度，因为称之为横向模糊匹配</p> <p><strong>示例</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/ab{2,5}c/g</span> <span class="token punctuation">;</span>   <span class="token comment">//g 含有一个a，2-5个b，一个c的字符串</span>

<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;abc abbc abbbc abbbbc abbbbbc abbbbbbc&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 匹配结果，只有满足前后位ac，中间只有2-5个b的字符串都匹配到了</span>
<span class="token comment">// =&gt; [&quot;abbc&quot;, &quot;abbbc&quot;, &quot;abbbbc&quot;, &quot;abbbbbc&quot;]</span>
</code></pre></div><p><strong>量词</strong></p> <p>指定需要匹配的字符次数，一些常见的次数表示可以用等价的符号代替，如下图:</p> <p><img src="https://s2.ax1x.com/2019/08/18/mQxUat.png" alt></p> <h3 id="纵向模糊匹配"><a href="#纵向模糊匹配" aria-hidden="true" class="header-anchor">#</a> 纵向模糊匹配</h3> <p>表示同一个位置可以匹配多种可能的字符</p> <p><strong>示例</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/a[123]b/g</span><span class="token punctuation">;</span>  <span class="token comment">// 匹配以a开头，以b结尾，中间含有123任意其中一个的字符</span>

<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;a0b a1b a2b a3b a4b&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 匹配结果</span>
<span class="token comment">// =&gt; [&quot;a1b&quot;, &quot;a2b&quot;, &quot;a3b&quot;]</span>
</code></pre></div><p><strong>字符组</strong></p> <p><code>常见的纵向模糊匹配集合别名</code></p> <p><strong>字符组</strong></p> <p><img src="https://s2.ax1x.com/2019/08/18/mQxRI0.png" alt></p> <h3 id="字符匹配案例分析"><a href="#字符匹配案例分析" aria-hidden="true" class="header-anchor">#</a> 字符匹配案例分析</h3> <p>1.匹配日期</p> <p>匹配 2017-06-10</p> <p><strong>分析</strong></p> <p>年  四位数字即可  [0-9]{4}</p> <p>月，分为0开头和1开头  0[1-9] | 1[0-2]</p> <p>日，分为0、1、2、3开头  0[1-9] | [12][1-9] | 3[01]</p> <p><strong>正则</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;2017-06-10&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; true</span>
</code></pre></div><p>2.匹配id</p> <p><strong>分析</strong></p> <p>id=&quot;.<em>&quot;  但是由于</em>是贪婪匹配，就会匹配到最后一个双引号为止</p> <p>id=&quot;.*?&quot; 可以使用惰性匹配来解决，但是效率低下</p> <p>id=&quot;[^&quot;]*&quot; 最佳</p> <p><strong>正则</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/id=&quot;[^&quot;]*&quot;/</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">'&lt;div id=&quot;container&quot; class=&quot;main&quot;&gt;&lt;/div&gt;'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; id=&quot;container&quot;</span>
</code></pre></div><h2 id="位置匹配"><a href="#位置匹配" aria-hidden="true" class="header-anchor">#</a> 位置匹配</h2> <p>位置在正则中表示相邻字符之间的位置，有以下描点</p> <h3 id><a href="#" aria-hidden="true" class="header-anchor">#</a> ^</h3> <p>表示字符串开头,多行字符表示行开头</p> <h3 id="结尾"><a href="#结尾" aria-hidden="true" class="header-anchor">#</a> $ 结尾</h3> <p>表示字符串开头,多行字符表示行结尾</p> <p>下面我们可以把字符串的开头和结尾用'#'代替</p> <p><strong>单行</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/^|$/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// =&gt; &quot;#hello#&quot;</span>
</code></pre></div><p><strong>多行</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;I\nlove\njavascript&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/^|$/gm</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
#I#
#love#
#javascript#
*/</span>
</code></pre></div><h3 id="b-单词边界"><a href="#b-单词边界" aria-hidden="true" class="header-anchor">#</a> \b 单词边界</h3> <p>\b 是单词边界，具体就是 \w 与 \W 之间的位置，也包括 \w 与 ^ 之间的位置，和 \w 与 $ 之间的位置。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;[JS] Lesson_01.mp4&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\b/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;[#JS#] #Lesson_01#.#mp4#&quot;</span>
</code></pre></div><h3 id="b-非单词边界"><a href="#b-非单词边界" aria-hidden="true" class="header-anchor">#</a> \B  非单词边界</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;[JS] Lesson_01.mp4&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\B/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;#[J#S]# L#e#s#s#o#n#_#0#1.m#p#4&quot;</span>
</code></pre></div><h3 id="p-先行断言"><a href="#p-先行断言" aria-hidden="true" class="header-anchor">#</a> (?=p)  先行断言</h3> <p>比如 (?=l)，表示 &quot;l&quot; 字符前面的位置，不包括p模式匹配的字符</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?=l)/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;he#l#lo&quot;</span>
</code></pre></div><h3 id="p-是-p-取反-先行否定断言"><a href="#p-是-p-取反-先行否定断言" aria-hidden="true" class="header-anchor">#</a> (?!p) 是 (?=p) 取反 先行否定断言</h3> <p>除匹配p模式前面以外的位置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?!l)/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;#h#ell#o#&quot;</span>
</code></pre></div><h3 id="p-后行断言"><a href="#p-后行断言" aria-hidden="true" class="header-anchor">#</a> (?&lt;=p) 后行断言</h3> <p>位置前面要满足匹配p模式，不包括p模式匹配的字符</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?&lt;=l)/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;hel#l#o&quot;</span>
</code></pre></div><h3 id="p-后行否定断言"><a href="#p-后行否定断言" aria-hidden="true" class="header-anchor">#</a> (?&lt;!p) 后行否定断言</h3> <p>位置前面要满足匹配p模式，除此位置的其余位置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?&lt;=l)/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;#h#e#llo#&quot;</span>
</code></pre></div><h3 id="位置匹配案例分析"><a href="#位置匹配案例分析" aria-hidden="true" class="header-anchor">#</a> 位置匹配案例分析</h3> <p>1.数字千位分隔符表示法</p> <p>比如把 &quot;12345678&quot;，变成 &quot;12,345,678&quot;。</p> <p><strong>分析</strong></p> <p>这个匹配一看就是匹配3位数字的前面的位置，可以使用先行断言来匹配 ?=\d{3}+， 就可以做到</p> <p><strong>正则</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;12345678&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?=(\d{3})+$)/g</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;12,345,678&quot;</span>

<span class="token comment">// 这里尝试3的倍数位数字会发现开头也加上了,</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">&quot;112345678&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?=(\d{3})+$)/g</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;,112,345,678&quot;</span>

<span class="token comment">// 限制此位置不能是开头即可</span>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/(?!^)(?=(\d{3})+$)/g</span><span class="token punctuation">;</span>
result <span class="token operator">=</span> <span class="token string">&quot;123456789&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;123,456,789&quot;</span>
</code></pre></div><p>1.实现字符串trim方法</p> <p><strong>分析</strong></p> <p>trim是用来去除字符串首尾空白符，嗯，一读这句话，首尾，那不就是首尾
^ $嘛，至于空白符\s就完事了</p> <p><strong>正则</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/^\s+|\s+$/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">' foobar '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>trim方法是实现首尾去除空白符的，那么新推出的trimStart,trimEnd如何实现呢,嘻嘻，大家可以想想</p> <h2 id="元字符转义问题"><a href="#元字符转义问题" aria-hidden="true" class="header-anchor">#</a> 元字符转义问题</h2> <p>转义这个问题是指一些符号在正则中拥有特殊的含义，比如^表示字符串起始位置，那么如何表示^这个字符串呢，那么就需要特殊的方法，成为转义，<strong>转义只需要在字符前加上\</strong></p> <h3 id="正则表达式元字符"><a href="#正则表达式元字符" aria-hidden="true" class="header-anchor">#</a> 正则表达式元字符</h3> <pre><code>^、$、.、*、+、?、|、\、/、(、)、[、]、{、}、=、!、:、- ,  
</code></pre> <h2 id="匹配行为-贪婪匹配和惰性匹配"><a href="#匹配行为-贪婪匹配和惰性匹配" aria-hidden="true" class="header-anchor">#</a> 匹配行为-贪婪匹配和惰性匹配</h2> <p>这里的<strong>匹配行为由将我们正则转为计算机语言的状态机决定</strong>，常见的有DFA和NFA, 目前比较常见的是NFA，JavaScript也是采用NFA实现的正则引擎，NFA一个特点就是会产生回溯行为，生动地来将，<strong>它采用类似深度优先搜索思想，遍历可能匹配的字符串，一旦下一次匹配失效，即可回退到前一个状态，听起来很像拿着线球走出迷宫的故事</strong>，回溯行为从直观想就能得知会影响效率，在JavaScript正则中，<strong>常见的回溯形式为贪婪量词、惰性量词、分支结构</strong>，下面会依次介绍</p> <h3 id="贪婪匹配"><a href="#贪婪匹配" aria-hidden="true" class="header-anchor">#</a> 贪婪匹配</h3> <p>最大范围匹配</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d{2,5}/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;123 1234 12345 123456&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;123&quot;, &quot;1234&quot;, &quot;12345&quot;, &quot;12345&quot;]</span>
</code></pre></div><p>示例中会将数字尽可能匹配到，所以看到匹配的数字都是依照空白符分割开来的</p> <h3 id="惰性匹配"><a href="#惰性匹配" aria-hidden="true" class="header-anchor">#</a> 惰性匹配 ?</h3> <p>最小匹配范围</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d{2,5}?/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;123 1234 12345 123456&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;12&quot;, &quot;12&quot;, &quot;34&quot;, &quot;12&quot;, &quot;34&quot;, &quot;12&quot;, &quot;34&quot;, &quot;56&quot;]</span>
</code></pre></div><p>示例中，加了？的量词之后，正则会在匹配2个数字之后停止</p> <h2 id="多选分支"><a href="#多选分支" aria-hidden="true" class="header-anchor">#</a> 多选分支</h2> <p>子模式任选其一 属于惰性匹配具体形式如下：(p1|p2|p3)，其中 p1、p2 和 p3 是子模式，用 |（管道符）分隔，表示其中任何之一。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/good|nice/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;good idea, nice try.&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;good&quot;, &quot;nice&quot;]</span>
</code></pre></div><h2 id="括号"><a href="#括号" aria-hidden="true" class="header-anchor">#</a> 括号</h2> <p>在很多语言语法中，括号最常见的是代表优先级，我们看看括号在正则表达式中有什么特殊的用途呢？</p> <h3 id="产生整体"><a href="#产生整体" aria-hidden="true" class="header-anchor">#</a> 产生整体</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">/</span>ab<span class="token operator">+</span><span class="token operator">/</span> <span class="token operator">=&gt;</span> a接上至少一个b
如何把量词作用与一个整体 
<span class="token operator">/</span><span class="token punctuation">(</span>ab<span class="token punctuation">)</span><span class="token operator">+</span><span class="token operator">/</span>
</code></pre></div><h3 id="分支结构"><a href="#分支结构" aria-hidden="true" class="header-anchor">#</a> 分支结构</h3> <p>表达分支的可能性</p> <div class="language-js extra-class"><pre class="language-js"><code>表示p1或p2表达式任选其一
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/^I love (JavaScript|Regular Expression)$/</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;I love JavaScript&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;I love Regular Expression&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="分组引用"><a href="#分组引用" aria-hidden="true" class="header-anchor">#</a> 分组引用</h3> <p>用于捕获括号匹配的结果</p> <p><strong>1.提取数据</strong></p> <p>括号里的匹配字符串可以被直接引用，用以特定的场景</p> <p>提取年月日</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/(\d{4})-(\d{2})-(\d{2})/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017-06-12&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2017</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> RegExp<span class="token punctuation">.</span>$<span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 06</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> RegExp<span class="token punctuation">.</span>$<span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12</span>
</code></pre></div><p><strong>2.替换</strong></p> <p>日期更换格式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/(\d{4})-(\d{2})-(\d{2})/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017-06-12&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> <span class="token string">&quot;$2/$3/$1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;06/12/2017&quot;</span>
</code></pre></div><h3 id="反向引用"><a href="#反向引用" aria-hidden="true" class="header-anchor">#</a> 反向引用</h3> <p>可以引用之前出现的分组结果</p> <p>有时候需要引用前面匹配的结果，比如说下面要求日期分隔符一致</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1表示出现的一个分组中的匹配结果</span>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d{4}(-|\/|\.)\d{2}\1\d{2}/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string1 <span class="token operator">=</span> <span class="token string">&quot;2017-06-12&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string2 <span class="token operator">=</span> <span class="token string">&quot;2017/06/12&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string3 <span class="token operator">=</span> <span class="token string">&quot;2017.06.12&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string4 <span class="token operator">=</span> <span class="token string">&quot;2016-06/12&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string1<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string2<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string3<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string4<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><h3 id="非捕获括号"><a href="#非捕获括号" aria-hidden="true" class="header-anchor">#</a> 非捕获括号</h3> <p>不捕获匹配的结果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/(?:ab)+/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;ababa abbb ababab&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;abab&quot;, &quot;ab&quot;, &quot;ababab&quot;]</span>
</code></pre></div><h3 id="括号案例"><a href="#括号案例" aria-hidden="true" class="header-anchor">#</a> 括号案例</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 驼峰化</span>
<span class="token keyword">function</span> <span class="token function">camelize</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/[-_\s]+(.)?/g</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> c <span class="token operator">?</span> c<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token function">camelize</span><span class="token punctuation">(</span><span class="token string">'-moz-transform'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// 中划线化</span>
<span class="token keyword">function</span> <span class="token function">dasherize</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/([A-Z])/g</span><span class="token punctuation">,</span> <span class="token string">'-$1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/[-_\s]+/g</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token function">dasherize</span><span class="token punctuation">(</span><span class="token string">'MozTransform'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="操作符优先级"><a href="#操作符优先级" aria-hidden="true" class="header-anchor">#</a> 操作符优先级</h2> <p><img src="https://s2.ax1x.com/2019/08/18/mQx4RU.png" alt></p> <h2 id="正则表达式可视化"><a href="#正则表达式可视化" aria-hidden="true" class="header-anchor">#</a> 正则表达式可视化</h2> <p>emmmm,虽然有优先级，但是有时候还是会看不懂，使用可视化工具帮助我们理解是一个很不错的idea，这里有一个<a href="https://regexper.com/" target="_blank" rel="noopener noreferrer">正则可视化网址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,在阅读不懂的正则表达式可以助你一臂之力。</p> <h2 id="正则表达式修饰符"><a href="#正则表达式修饰符" aria-hidden="true" class="header-anchor">#</a> 正则表达式修饰符</h2> <table><thead><tr><th>修饰符</th> <th>描述</th></tr></thead> <tbody><tr><td>g</td> <td>全局匹配，即找到所有的匹配</td></tr> <tr><td>y</td> <td>全局匹配，即找到所有的匹配,但是此匹配要求每个子串是连续下标的</td></tr> <tr><td>i</td> <td>忽略字母大小写</td></tr> <tr><td>m</td> <td>多行匹配，使用^和$匹配多行时使用</td></tr></tbody></table> <h3 id="g"><a href="#g" aria-hidden="true" class="header-anchor">#</a> g</h3> <p>默认是找到第一个匹配字符就停止，加了g修饰符就会找到字符串中所有匹配的字符,下面的例子一目了然</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [ '1', index: 0, input: '123' ]</span>

<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [ '1', '2', '3' ]</span>
</code></pre></div><h3 id="y"><a href="#y" aria-hidden="true" class="header-anchor">#</a> y</h3> <p>与g行为一致的是，找到全局匹配的子串，但是y有特殊行为，要求每一个匹配的子串起始位置必须是上一个子串的结束位置,看一下下面的例子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">'aaa_aa_a'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> r1 <span class="token operator">=</span> <span class="token regex">/a+/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> r2 <span class="token operator">=</span> <span class="token regex">/a+/y</span><span class="token punctuation">;</span>

r1<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">// [&quot;aaa&quot;]</span>
r2<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">// [&quot;aaa&quot;]</span>

r1<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">// [&quot;aa&quot;]</span>
r2<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">// null</span>
</code></pre></div><h3 id="i"><a href="#i" aria-hidden="true" class="header-anchor">#</a> i</h3> <p>i的含义比较简单</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\A/i</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 'a', index: 0, input: 'a' ]</span>

<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\A/i</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 'A', index: 0, input: 'A' ]</span>
</code></pre></div><h3 id="m"><a href="#m" aria-hidden="true" class="header-anchor">#</a> m</h3> <p>m就是为了让^和$变成行头和行尾</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/^A$/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;A\nA&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>

<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/^A$/mg</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;A\nA&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 'A', 'A' ]</span>

</code></pre></div><h2 id="正则表达式编程"><a href="#正则表达式编程" aria-hidden="true" class="header-anchor">#</a> 正则表达式编程</h2> <p>在我们使用正则表达式匹配之后，JavaScript提供了一些操作给我们使用，下面依次介绍</p> <h3 id="起始api-exec"><a href="#起始api-exec" aria-hidden="true" class="header-anchor">#</a> 起始API exec</h3> <p>exec是正则表达式编程中最基本的API，<strong>它拥有对字符串匹配，迭代的能力，后续API可以理解为特定场景的exec封装的API</strong>,在默认情况下返回第一次匹配的字符串，g修饰符下，每次从上一个匹配结果末端下标开始查找下一个匹配结果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
方法返回正则匹配的字符串
* @param string 执行的字符串
* @return {RegExpExecArray | null} 正则执行数组或者null
*/</span>
<span class="token function">exec</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> string<span class="token punctuation">)</span><span class="token punctuation">:</span> RegExpExecArray <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex">/\d/g</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ '1', index: 0, input: '123456' ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ '2', index: 1, input: '123456' ]</span>
</code></pre></div><h3 id="验证"><a href="#验证" aria-hidden="true" class="header-anchor">#</a> 验证</h3> <p>检测目标字符串是否有满足匹配的<strong>子串</strong>,注意验证是有没有子串，比较常用的是test，它直接返回boolean表示验证结果</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token comment">/**
  方法返回一个布尔值表示是否在给定字符串中，存在一个匹配正则的字符串
  * @param string 被测试的字符串
  * @return {boolean} 是否匹配存在匹配子串
*/</span>
<span class="token function">test</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> string<span class="token punctuation">)</span><span class="token punctuation">:</span> boolean<span class="token punctuation">;</span>
</code></pre></div><p><strong>可以理解成一下代码</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 若有一个或多个匹配，第一次匹配都能匹配到结果，否则返回null</span>
<span class="token class-name">RegExp</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex">/\d/</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p><strong>实例</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;abc123&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="切分"><a href="#切分" aria-hidden="true" class="header-anchor">#</a> 切分</h3> <p><strong>在匹配标志符位置进行切分</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
  方法按照给定的正则返回分割后的子串数组
  * @param separator 分割器，可以使一个字符串或者一个正则表达式 
  * @param limit 返回结果数组的长度
  * @return {string []} 分割后的字符串数组
  */</span>
<span class="token function">split</span><span class="token punctuation">(</span>separator<span class="token punctuation">:</span> string <span class="token operator">|</span> RegExp<span class="token punctuation">,</span> limit<span class="token operator">?</span><span class="token punctuation">:</span> number<span class="token punctuation">)</span><span class="token punctuation">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>可以理解成以下代码</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">split</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">reg<span class="token punctuation">,</span> limit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> curIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
  <span class="token comment">// 此时this为String对象，需要拆包</span>
  <span class="token keyword">let</span> str <span class="token operator">=</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> splitArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">// 执行exec方法</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span>result <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> findIndex <span class="token operator">=</span> result<span class="token punctuation">.</span>index 
    <span class="token comment">// 分隔符相邻</span>
    <span class="token keyword">const</span> isadjoin <span class="token operator">=</span>  curIndex <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">===</span> findIndex
    <span class="token comment">// 分隔符之间的字符</span>
    <span class="token keyword">let</span> splitMiddleStr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>curIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> findIndex<span class="token punctuation">)</span>
    <span class="token comment">// 此次分割出来的字符</span>
    <span class="token keyword">let</span> splitedStr <span class="token operator">=</span> isadjoin <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">:</span>  splitMiddleStr
    splitArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>splitedStr<span class="token punctuation">)</span>
    curIndex <span class="token operator">=</span> findIndex
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> splitArr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>limit<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>实例</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/,/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;html,css,javascript&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;html&quot;, &quot;css&quot;, &quot;javascript&quot;]</span>

<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/,/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;html,css,javascript&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;html&quot;]</span>
</code></pre></div><p><strong>注意点</strong></p> <p>1.使用正则切分，若正则含有捕获括号, 结果会带有正则匹配部分</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;html,css,javascript&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex">/(,)/</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt;[&quot;html&quot;, &quot;,&quot;, &quot;css&quot;, &quot;,&quot;, &quot;javascript&quot;]</span>
</code></pre></div><h3 id="提取"><a href="#提取" aria-hidden="true" class="header-anchor">#</a> 提取</h3> <p><strong>匹配后提取部分数据,比较常用的是match</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
* 方法会以给定的正则去匹配字符串，若匹配成功，则返回匹配数组，否则返回null
* @param regexp 字符串或者正则对象
* @return {RegExpMatchArray | null} 匹配结果数组或者null
*/</span>
<span class="token function">match</span><span class="token punctuation">(</span>regexp<span class="token punctuation">:</span> string <span class="token operator">|</span> RegExp<span class="token punctuation">)</span><span class="token punctuation">:</span> RegExpMatchArray <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>可以理解成以下代码</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017.06.27&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regex1 <span class="token operator">=</span> <span class="token regex">/\b(\d+)\b/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regex2 <span class="token operator">=</span> <span class="token regex">/\b(\d+)\b/g</span><span class="token punctuation">;</span>

<span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">match</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">reg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 是否含有g修饰符</span>
  <span class="token keyword">let</span> isGlobal <span class="token operator">=</span> reg<span class="token punctuation">.</span>global
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">let</span> curString <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>isGlobal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 返回全部匹配字符串数组</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>curString <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>curString<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 返回第一次匹配的字符串数组</span>
    result <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ '2017', '2017', index: 0, input: '2017.06.27' ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ '2017', '06', '27' ]</span>
</code></pre></div><p><strong>实例</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/^(\d{4})\D(\d{2})\D(\d{2})$/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017-06-26&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt;[&quot;2017-06-26&quot;, &quot;2017&quot;, &quot;06&quot;, &quot;26&quot;, index: 0, input: &quot;2017-06-26&quot;]</span>

</code></pre></div><p><strong>注意点</strong></p> <p>1.match会把第一个参数的<strong>字符串转成正则</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017.06.27&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;2&quot;, index: 0, input: &quot;2017.06.27&quot;]</span>
<span class="token comment">//需要修改成下列形式之一</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">&quot;\\.&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/\./</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;.&quot;, index: 4, input: &quot;2017.06.27&quot;]</span>
<span class="token comment">// =&gt; [&quot;.&quot;, index: 4, input: &quot;2017.06.27&quot;]</span>
</code></pre></div><p>2.match返回值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017.06.27&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regex1 <span class="token operator">=</span> <span class="token regex">/\b(\d+)\b/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regex2 <span class="token operator">=</span> <span class="token regex">/\b(\d+)\b/g</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex1<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;2017&quot;, &quot;2017&quot;, index: 0, input: &quot;2017.06.27&quot;]  不带g返回第一个匹配的字符串，分组捕获的内容，整体匹配的第一个下标，输入的目标字符串</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex2<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 带g返回所有匹配的内容</span>
<span class="token comment">// =&gt; [&quot;2017&quot;, &quot;06&quot;, &quot;27&quot;]</span>

</code></pre></div><h3 id="替换"><a href="#替换" aria-hidden="true" class="header-anchor">#</a> 替换</h3> <p><strong>替换匹配的信息进行处理，使用replace</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
* 方法按照匹配规则, 使用替换值，将匹配字符串替换为替换值
* @param searchValue 需要匹配的字符串或者正则
* @param replaceValue 替换字符串
* @return {string} 替换后的字符串
*/</span>
<span class="token function">replace</span><span class="token punctuation">(</span>searchValue<span class="token punctuation">:</span> string <span class="token operator">|</span> RegExp<span class="token punctuation">,</span> replaceValue<span class="token punctuation">:</span> string<span class="token punctuation">)</span><span class="token punctuation">:</span> string<span class="token punctuation">;</span>

<span class="token comment">/**
* 方法按照匹配规则, 
* @param searchValue 需要匹配的字符串或者正则
* @param replacer 替换器
* @return {string} 替换后的字符串
*/</span>
<span class="token function">replace</span><span class="token punctuation">(</span>searchValue<span class="token punctuation">:</span> string <span class="token operator">|</span> RegExp<span class="token punctuation">,</span> <span class="token function-variable function">replacer</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">substring<span class="token punctuation">:</span> string<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> string<span class="token punctuation">)</span><span class="token punctuation">:</span> string<span class="token punctuation">;</span>
</code></pre></div><p><strong>可以理解成以下代码，这里仅实现全局替换,让大家了解replace是一个特定场景下的api即可</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017.06.27&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regex2 <span class="token operator">=</span> <span class="token regex">/\d+/g</span><span class="token punctuation">;</span>

<span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">replace</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">reg<span class="token punctuation">,</span> replaceValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这里this是String对象，使用valueOf取出字符串值</span>
  <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 先用正则分割字符串</span>
  <span class="token keyword">let</span> strArr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span>
  <span class="token comment">// 用replaceValue来填充替换的地方</span>
  str <span class="token operator">=</span> strArr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>replaceValue<span class="token punctuation">)</span>
  <span class="token keyword">return</span> str
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regex2<span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.1.1</span>
</code></pre></div><p><strong>实例</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017-06-26&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> today <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/-/g</span><span class="token punctuation">,</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> today <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; Mon Jun 26 2017 00:00:00 GMT+0800 (中国标准时间)</span>
</code></pre></div><p><strong>注意点</strong></p> <p>1.当第二个参数是字符串是，有以下特殊字符</p> <p><img src="https://s2.ax1x.com/2019/08/18/mQxjJK.png" alt></p> <p>2.当第二个参数是函数时，函数传入参数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 从左往右分别是匹配的字符串，捕获组，匹配字符串的起始位置，输入字符串</span>
<span class="token punctuation">[</span>match<span class="token punctuation">,</span> $<span class="token number">1</span><span class="token punctuation">,</span> $<span class="token number">2</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> input<span class="token punctuation">]</span>

<span class="token keyword">let</span>  a <span class="token operator">=</span> <span class="token string">&quot;1234 2345 3456&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(\d)\d{2}(\d)/g</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> $<span class="token number">1</span><span class="token punctuation">,</span> $<span class="token number">2</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> input</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span>match<span class="token punctuation">,</span> $<span class="token number">1</span><span class="token punctuation">,</span> $<span class="token number">2</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;1234&quot;, &quot;1&quot;, &quot;4&quot;, 0, &quot;1234 2345 3456&quot;]</span>
<span class="token comment">// =&gt; [&quot;2345&quot;, &quot;2&quot;, &quot;5&quot;, 5, &quot;1234 2345 3456&quot;]</span>
<span class="token comment">// =&gt; [&quot;3456&quot;, &quot;3&quot;, &quot;6&quot;, 10, &quot;1234 2345 3456&quot;]</span>
</code></pre></div><p>3.replace可以嵌套使用</p> <p>在一些需求里，我们无可避免需要多次正则处理，比如先找到一个整体，再替换这个整体里面的一部分，以缩小影响范围,可以先用replace匹配一次子串，然后再次缩小范围匹配</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> domStr <span class="token operator">=</span> <span class="token template-string"><span class="token string">`&lt;div style=&quot;font-family: Times, serif, 'Times New Roman'&quot; class=&quot;333&quot;&gt;
    &lt;div style=&quot;font-family: Verdana, Geneva, Tahoma, sans-serif;color: #333&quot;&gt;
      &lt;div style=&quot;font-family: Verdana, Geneva, Tahoma, sans-serif;color: #333&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;`</span></span>
<span class="token comment">// 匹配style=&quot;&quot; 关键是中间部分</span>
<span class="token keyword">let</span> styleRegex <span class="token operator">=</span> <span class="token regex">/style=&quot;[^&quot;]*&quot;/g</span>  
<span class="token keyword">let</span> result <span class="token operator">=</span> domStr<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>styleRegex<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">style</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>style<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">let</span> isoffFontFamily <span class="token operator">=</span> <span class="token regex">/font\-family\:([^;])*(Times New Roman)+([^;&quot;])*/</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> style<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>isoffFontFamily<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &lt;div style=&quot;&quot; class=&quot;333&quot;&gt;</span>
<span class="token comment">//     &lt;div style=&quot;font-family: Verdana, Geneva, Tahoma, sans-serif;color: #333&quot;&gt;</span>
<span class="token comment">//       &lt;div style=&quot;font-family: Verdana, Geneva, Tahoma, sans-serif;color: #333&quot;&gt;&lt;/div&gt;</span>
<span class="token comment">//     &lt;/div&gt;</span>
<span class="token comment">// &lt;/div&gt;</span>
</code></pre></div><h3 id="构造函数与实例"><a href="#构造函数与实例" aria-hidden="true" class="header-anchor">#</a> 构造函数与实例</h3> <p>1.一般不使用构造函数生成正则表达式，<strong>优先使用字面量，除非需要动态生成正则表达式</strong></p> <p>2.修饰符都有其对应的对象布尔属性表面是否启用</p> <table><thead><tr><th>修饰符</th> <th>实例属性</th></tr></thead> <tbody><tr><td>g</td> <td>global</td></tr> <tr><td>y</td> <td>sticky</td></tr> <tr><td>i</td> <td>ingnoreCase</td></tr> <tr><td>m</td> <td>multiline</td></tr></tbody></table> <p>3.可以用过source实例属性来查看动态构建的正则表达式结果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> className <span class="token operator">=</span> <span class="token string">&quot;high&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;(^|\\s)&quot;</span> <span class="token operator">+</span> className <span class="token operator">+</span> <span class="token string">&quot;(\\s|$)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span>source <span class="token punctuation">)</span>
<span class="token comment">// =&gt; (^|\s)high(\s|$) 即字符串&quot;(^|\\s)high(\\s|$)&quot;</span>
</code></pre></div><h2 id="正则表达式的构建"><a href="#正则表达式的构建" aria-hidden="true" class="header-anchor">#</a> 正则表达式的构建</h2> <p>如何针对问题，构建一个合适的正则表达式</p> <h3 id="法则"><a href="#法则" aria-hidden="true" class="header-anchor">#</a> 法则</h3> <p><strong>1.是否有必要使用正则</strong></p> <p>人在学习一个新东西之后，很容易陷入到无所不用，正则亦是如此，其实很多时候，我们能够用字符串API解决，就不需要正则出手，以下是一些例子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017-07-01&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/^(\d{4})-(\d{2})-(\d{2})/</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;2017-07-01&quot;, &quot;2017&quot;, &quot;07&quot;, &quot;01&quot;, index: 0, input: &quot;2017-07-01&quot;]</span>

<span class="token keyword">var</span> result <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> result <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; [&quot;2017&quot;, &quot;07&quot;, &quot;01&quot;]</span>
</code></pre></div><p>在年月日的例子中，我们使用了正则来获取年月日，相比采用分隔符，增加了代码的复杂性。</p> <p><strong>2.是否有必要严格匹配</strong></p> <p>一般来说，正则由于其复杂性，复杂度上来，需要严格匹配就很困难，应该结合场景，够用就行，或者可以做一些预处理字符串，使得匹配难度降低。</p> <p><strong>3.效率</strong></p> <p>1.尽量使用具体字符组代替通配符，减少回溯</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">/</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">/</span> 虽然可以匹配任意字符，但是因为贪婪性质，容易出现回溯行为，比如下面的
匹配<span class="token string">&quot;abc&quot;</span> 使用<span class="token operator">/</span><span class="token string">&quot;.*&quot;</span><span class="token operator">/</span>
<span class="token comment">// 123&quot;abc&quot;456 </span>
</code></pre></div><p><img src="https://s2.ax1x.com/2019/08/18/mQzEJf.png" alt></p> <p><strong>在匹配过程中进行了4次回溯，由于回溯需要保存之前的状态，所以需要额外的空间，另外，回溯行为很直观地可以看出来影响效率，/&quot;[^&quot;]*&quot;/，就可以避免回溯行为</strong></p> <p>2.独立出确定字符，加快匹配判断速度</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token regex">/a+/</span> 
<span class="token comment">// 如果能确定是比如字符a是存在的，可以改写成一下正则，加快匹配判断速度</span>
<span class="token operator">/</span>aa<span class="token operator">+</span><span class="token operator">/</span>
</code></pre></div><p>3.对多选分支提取公共部分，减少匹配过程中可消除的重复</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">/</span><span class="token operator">^</span>abc<span class="token operator">|</span><span class="token operator">^</span>def<span class="token operator">/</span> <span class="token comment">//修改成 </span>
<span class="token operator">/</span><span class="token operator">^</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token punctuation">:</span>abc<span class="token operator">|</span>def<span class="token punctuation">)</span><span class="token operator">/</span>。
<span class="token comment">// 多选分支是惰性的,在不匹配分支的时候，会尝试其他分支，公共的部分也会进行这个匹配，然而公共的部分没有必要多次匹配，可以提取出来，减少匹配中的重复过程</span>
</code></pre></div><p>4.使用非捕获括号</p> <p>在我们不需要捕获括号中的内容时，可以使用非捕获括号来省掉原本用户保存捕获内容的内存</p> <h2 id="实践"><a href="#实践" aria-hidden="true" class="header-anchor">#</a> 实践</h2> <p>1.快速找出Vue源码中的所有正则</p> <p><strong>尝试一</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token regex">/\/.*\//</span>

<span class="token comment">// 这会把注释、路径、域名都匹配进去</span>

<span class="token comment">// /* */  </span>
</code></pre></div><p><strong>结果</strong></p> <p><img src="https://s2.ax1x.com/2019/08/18/mQzMes.png" alt></p> <p><strong>尝试2</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token regex">/\/(\S)+\//</span>

<span class="token comment">// 这里匹配了非空字符串，而且必须至少出现一次</span>

<span class="token comment">// /* */  </span>
</code></pre></div><p><strong>结果</strong></p> <p>一下子少了很多，但是仍然会匹配到不是正则的 /ggg/ 可能只是路径中的一部分，但是我们需要检查的量已经可以接受了。</p> <p><img src="https://s2.ax1x.com/2019/08/18/mQzGWT.png" alt></p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/blog/assets/js/app.5b6b1d01.js" defer></script><script src="/blog/assets/js/53.d85ad874.js" defer></script>
  </body>
</html>

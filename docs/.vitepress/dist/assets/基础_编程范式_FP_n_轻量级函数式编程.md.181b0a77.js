import{_ as r,c as e,o as t,a as p}from"./app.a3c81315.js";const v='{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"\u57FA\u7840/\u7F16\u7A0B\u8303\u5F0F/FP/n/\u8F7B\u91CF\u7EA7\u51FD\u6570\u5F0F\u7F16\u7A0B.md"}',n={},a=p(`<p>\u51FD\u6570\u57FA\u7840</p><p>\u663E\u5F0F\u8F93\u5165 \u663E\u5F0Freturn</p><p>\u9AD8\u9636\u51FD\u6570 \u63A5\u53D7\u6216\u8005\u8FD4\u56DE\u4E00\u4E2A\u751A\u81F3\u591A\u4E2A\u51FD\u6570</p><p>\u95ED\u5305 FP\u57FA\u7840</p><p>\u4E0D\u8981\u4F7F\u7528this</p><p>\u4F20\u53C2</p><p>\u504F\u51FD\u6570</p><p>function partial(fn,...presetArgs) { return function partiallyApplied(...laterArgs){ return fn( ...presetArgs, ...laterArgs ); }; }</p><p>var partial = (fn, ...presetArgs) =&gt; (...laterArgs) =&gt; fn(...presetArgs, ...laterArgs)</p><p>eg:</p><p>var getPerson = partial(ajax, &#39;<a href="http://some.api/person" target="_blank" rel="noopener noreferrer">http://some.api/person</a>&#39;)</p><p>var getOrder = partial(ajax, &#39;<a href="http://some.api/order" target="_blank" rel="noopener noreferrer">http://some.api/order</a>&#39;)</p><p>getPerson\u76F8\u5F53\u4E8E</p><p>var getPerson = function partiallyApplied(...laterArgs) { return ajax( &quot;<a href="http://some.api/person" target="_blank" rel="noopener noreferrer">http://some.api/person</a>&quot;, ...laterArgs ); };</p><p>\u6784\u5EFAgetCurrentPerson</p><p>var getCurrentUser = partial( ajax, &quot;<a href="http://some.api/person" target="_blank" rel="noopener noreferrer">http://some.api/person</a>&quot;, { user: CURRENT_USER_ID } );</p><p>// \u7248\u672C 2 var getCurrentUser = partial( getPerson, { user: CURRENT_USER_ID } );</p><p>\u7406\u89E3</p><p>var getCurrentUser = function partiallyApplied(...laterArgs) { return ajax( &quot;<a href="http://some.api/person" target="_blank" rel="noopener noreferrer">http://some.api/person</a>&quot;, { user: CURRENT_USER_ID }, ...laterArgs ); };</p><p>// \u7248\u672C 2 var getCurrentUser = function outerPartiallyApplied(...outerLaterArgs) { var getPerson = function innerPartiallyApplied(...innerLaterArgs){ return ajax( &quot;<a href="http://some.api/person" target="_blank" rel="noopener noreferrer">http://some.api/person</a>&quot;, ...innerLaterArgs ); };</p><pre><code>return getPerson( { user: CURRENT_USER_ID }, ...outerLaterArgs );
</code></pre><p>}</p><p>lodash\u5B9E\u73B0</p><p>function greet(greeting, name) { return greeting + &#39; &#39; + name; }</p><p>var sayHelloTo = _.partial(greet, &#39;hello&#39;); sayHelloTo(&#39;fred&#39;); // =&gt; &#39;hello fred&#39;</p><p>// Partially applied with placeholders. var greetFred = _.partial(greet, _, &#39;fred&#39;); greetFred(&#39;hi&#39;); // =&gt; &#39;hi fred&#39;</p><p>bind</p><p>function reverseArgs(fn) { return function argsReversed(...args){ return fn( ...args.reverse() ); }; }</p><p>lodash</p><p>var rearged = _.rearg(function(a, b, c) { return [a, b, c]; }, [2, 0, 1]);</p><p>rearged(&#39;b&#39;, &#39;c&#39;, &#39;a&#39;) // =&gt; [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</p><p>\u6211\u4EEC\u4E0D\u518D\u4ECE\u5DE6\u8FB9\u5F00\u59CB\uFF0C\u800C\u662F\u4ECE\u53F3\u4FA7\u5F00\u59CB\u504F\u5E94\u7528\u5B9E\u53C2\u3002\u4E3A\u4E86\u6062\u590D\u671F\u671B\u7684\u5B9E\u53C2\u987A\u5E8F\uFF0C\u63A5\u7740\u6211\u4EEC\u53C8\u5C06\u504F\u5E94\u7528\u5B9E\u53C2\u540E\u7684\u51FD\u6570\u98A0\u5012\u4E00\u4E0B\u5B9E\u53C2\u987A\u5E8F</p><p>function partialRight( fn, ...presetArgs ) { return reverseArgs( partial( reverseArgs( fn ), ...presetArgs.reverse() ) ); }</p><p>lodash</p><p>function greet(greeting, name) { return greeting + &#39; &#39; + name; }</p><p>var greetFred = _.partialRight(greet, &#39;fred&#39;); greetFred(&#39;hi&#39;); // =&gt; &#39;hi fred&#39;</p><p>// Partially applied with placeholders. var sayHelloTo = _.partialRight(greet, &#39;hello&#39;, _); sayHelloTo(&#39;fred&#39;); // =&gt; &#39;hello fred&#39;</p><p>\u4F9D\u6B21\u4F20\u53C2 \u51FD\u6570\u67EF\u7406\u5316 function curry(fn,arity = fn.length) { return (function nextCurried(prevArgs){ return function curried(nextArg){ var args = prevArgs.concat( [nextArg] );</p><pre><code>        if (args.length &gt;= arity) {
            return fn( ...args );
        }
        else {
            return nextCurried( args );
        }
    };
})( [] );
</code></pre><p>}</p><p>var curry = (fn, arity = fn.length, nextCurried) =&gt; (nextCurried = prevArgs =&gt; nextArg =&gt; { var args = prevArgs.concat( [nextArg] );</p><pre><code>            if (args.length &gt;= arity) {
                return fn( ...args );
            }
            else {
                return nextCurried( args );
            }
        }
    )( [] );
</code></pre><p>\u591A\u53C2</p><p>function looseCurry(fn,arity = fn.length) { return (function nextCurried(prevArgs){ return function curried(...nextArgs){ var args = prevArgs.concat( nextArgs );</p><pre><code>        if (args.length &gt;= arity) {
            return fn( ...args );
        }
        else {
            return nextCurried( args );
        }
    };
})( [] );
</code></pre><p>}</p><p>lodash \u5141\u8BB8\u5355\u53C2\u548C\u591A\u53C2</p><p>var abc = function(a, b, c) { return [a, b, c]; };</p><p>var curried = _.curry(abc);</p><p>curried(1)(2)(3); // =&gt; [1, 2, 3]</p><p>curried(1, 2)(3); // =&gt; [1, 2, 3]</p><p>curried(1, 2, 3); // =&gt; [1, 2, 3]</p><p>\u53CD\u67EF\u7406\u5316 \u51FD\u6570\u6700\u4E3A\u5E38\u89C1\u7684\u4F5C\u7528\u5BF9\u8C61\u5F88\u53EF\u80FD\u5E76\u4E0D\u662F\u4EBA\u4E3A\u751F\u6210\u7684\u67EF\u91CC\u5316\u51FD\u6570</p><p>function uncurry(fn) { return function uncurried(...args){ var ret = fn;</p><pre><code>    for (let i = 0; i &lt; args.length; i++) {
        ret = ret( args[i] );
    }

    return ret;
};
</code></pre><p>}</p><p>\u56FA\u5B9A\u5355\u4E2A\u53C2\u6570</p><p>function unary(fn) { return function onlyOneArg(arg){ return fn( arg ); }; }</p><p>lodash</p><p>_.map([&#39;6&#39;, &#39;8&#39;, &#39;10&#39;], _.unary(parseInt)); // =&gt; [6, 8, 10]</p><p>[&quot;1&quot;,&quot;2&quot;,&quot;3&quot;].map( parseFloat ); // [1,2,3]</p><p>[&quot;1&quot;,&quot;2&quot;,&quot;3&quot;].map( parseInt ); // [1,NaN,NaN]</p><p>[&quot;1&quot;,&quot;2&quot;,&quot;3&quot;].map( unary( parseInt ) ); // [1,2,3]</p><p>function identity(v) { return v; }</p><p>var identity = v =&gt; v;</p><p>lodash var object = { &#39;a&#39;: 1 };</p><p>console.log(_.identity(object) === object); // =&gt; true</p><p>var words = &quot; Now is the time for all... &quot;.split( /\\s|\\b/ ); words; // [&quot;&quot;,&quot;Now&quot;,&quot;is&quot;,&quot;the&quot;,&quot;time&quot;,&quot;for&quot;,&quot;all&quot;,&quot;...&quot;,&quot;&quot;]</p><p>words.filter( identity ); // [&quot;Now&quot;,&quot;is&quot;,&quot;the&quot;,&quot;time&quot;,&quot;for&quot;,&quot;all&quot;,&quot;...&quot;]</p><p>\u5904\u7406\u5F62\u53C2 \u5B9E\u53C2 \u6620\u5C04</p><p>function partialProps(fn,presetArgsObj) { return function partiallyApplied(laterArgsObj){ return fn( Object.assign( {}, presetArgsObj, laterArgsObj ) ); }; }</p><p>function curryProps(fn,arity = 1) { return (function nextCurried(prevArgsObj){ return function curried(nextArgObj = {}){ var [key] = Object.keys( nextArgObj ); var allArgsObj = Object.assign( {}, prevArgsObj, { [key]: nextArgObj[key] } );</p><pre><code>        if (Object.keys( allArgsObj ).length &gt;= arity) {
            return fn( allArgsObj );
        }
        else {
            return nextCurried( allArgsObj );
        }
    };
})( {} );
</code></pre><p>}</p><p>\u5C5E\u6027\u62D3\u5C55 \u51FD\u6570\u7B7E\u540D\u63A7\u5236\u6743\u4E0D\u5728\u81EA\u5DF1\u624B\u91CC</p><p>function spreadArgProps( fn, propOrder = fn.toString() .replace( /^(?\u{1F626}?:function.<em>(([^]</em>?)))|(?\u{1F626}[^()]+?)\\s*=&gt;)|(?\u{1F626}([^]<em>?))\\s</em>=&gt;))[^]+$/, &quot;$1$2$3&quot; ) .split( /\\s*,\\s*/ ) .map( v =&gt; v.replace( /[=\\s].*$/, &quot;&quot; ) ) ) { return function spreadFn(argsObj) { return fn( ...propOrder.map( k =&gt; argsObj[k] ) ); }; }</p><p>\u8F6C\u6362\u53C2\u6570 \u5C06\u6570\u7EC4\u53C2\u6570\u5206\u89E3\u6210\u5355\u4E2A\u53C2\u6570</p><p>function spreadArgs(fn) { return function spreadFn(argsArr) { return fn( ...argsArr ); }; }</p><p>lodash</p><p>\u65E0\u5F62\u53C2\u98CE\u683C</p><p>function not(predicate) { return function negated(...args){ return !predicate( ...args ); }; }</p><p>// \u5C06 <code>console.log</code> \u5F53\u6210\u4E00\u4E2A\u51FD\u6570\u4F7F\u7528 // \u4FBF\u4E8E\u907F\u514D\u6F5C\u5728\u7684\u7ED1\u5B9A\u95EE\u9898</p><p>function output(txt) { console.log( txt ); }</p><p>function printIf( predicate, msg ) { if (predicate( msg )) { output( msg ); } }</p><p>function isShortEnough(str) { return str.length &lt;= 5; }</p><p>var msg1 = &quot;Hello&quot;; var msg2 = msg1 + &quot; World&quot;;</p><p>printIf( isShortEnough, msg1 ); // Hello printIf( isShortEnough, msg2 );</p><p>function isLongEnough(str) { return !isShortEnough( str ); }</p><p>printIf( isLongEnough, msg1 ); printIf( isLongEnough, msg2 ); // Hello World</p><p>function when(predicate,fn) { return function conditional(...args){ if (predicate( ...args )) { return fn( ...args ); } }; }</p><p>var printIf = uncurry( rightPartial( when, output ) );</p><p>\u7EC4\u5408\u51FD\u6570</p><p>function compose2(fn2,fn1) { return function composed(origValue){ return fn2( fn1( origValue ) ); }; }</p><p>// ES6 \u7BAD\u5934\u51FD\u6570\u5F62\u5F0F\u5199\u6CD5 var compose2 = (fn2,fn1) =&gt; origValue =&gt; fn2( fn1( origValue ) );</p><p>function compose(...fns) { return function composed(result){ // \u62F7\u8D1D\u4E00\u4EFD\u4FDD\u5B58\u51FD\u6570\u7684\u6570\u7EC4 var list = fns.slice();</p><pre><code>	while (list.length &gt; 0) {
		// \u5C06\u6700\u540E\u4E00\u4E2A\u51FD\u6570\u4ECE\u5217\u8868\u5C3E\u90E8\u62FF\u51FA
		// \u5E76\u6267\u884C\u5B83
		result = list.pop()( result );
	}

	return result;
};
</code></pre><p>}</p><p>\u9AD8\u6027\u80FD\u5B9E\u73B0</p><p>function compose(...fns) { return function composed(result){ return fns.reverse().reduce( function reducer(result,fn){ return fn( result ); }, result ); }; }</p><p>// ES6 \u7BAD\u5934\u51FD\u6570\u5F62\u5F0F\u5199\u6CD5 var compose = (...fns) =&gt; result =&gt; fns.reverse().reduce( (result,fn) =&gt; fn( result ) , result );</p><p>\u591A\u53C2\u6570\u7248\u672C function compose(...fns) { return fns.reverse().reduce( function reducer(fn1,fn2){ return function composed(...args){ return fn2( fn1( ...args ) ); }; } ); }</p><p>lodash</p><p>function square(n) { return n * n; }</p><p>var addSquare = _.flowRight([square, _.add]); addSquare(1, 2); // =&gt; 9</p><p>\u4ECE\u53F3\u5230\u5DE6\u7684\u7EC4\u5408\u51FD\u6570 function pipe(...fns) { return function piped(result){ var list = fns.slice();</p><pre><code>	while (list.length &gt; 0) {
		// \u4ECE\u5217\u8868\u4E2D\u53D6\u7B2C\u4E00\u4E2A\u51FD\u6570\u5E76\u6267\u884C
		result = list.shift()( result );
	}

	return result;
};
</code></pre><p>}</p><p>flowRight</p><p>lodash</p><p>function square(n) { return n * n; }</p><p>var addSquare = <em>.flow([</em>.add, square]); addSquare(1, 2); // =&gt; 9</p><p>\u5DE6\u504F\u548C\u53F3\u504F\u5BF9\u6BD4</p><p>var filterWords = partialRight( compose, unique, words );</p><p>// vs</p><p>var filterWords = partial( pipe, words, unique );</p><p>\u62BD\u8C61\u7EC4\u5408</p><p>// \u63D0\u4F9B\u8BE5API\uFF1Aajax( url, data, cb ) var getPerson = partial( ajax, &quot;<a href="http://some.api/person" target="_blank" rel="noopener noreferrer">http://some.api/person</a>&quot; ); var getLastOrder = partial( ajax, &quot;<a href="http://some.api/order" target="_blank" rel="noopener noreferrer">http://some.api/order</a>&quot;, { id: -1 } );</p><p>getLastOrder( function orderFound(order){ getPerson( { id: order.personId }, function personFound(person){ output( <a href="http://person.name" target="_blank" rel="noopener noreferrer">person.name</a> ); } ); } );</p><p>\u6211\u4EEC\u60F3\u8981\u79FB\u9664\u7684\u201C\u70B9\u201D\u662F\u5BF9 order \u548C person \u53C2\u6570\u7684\u5F15\u7528</p><p>\u8BA9\u6211\u4EEC\u5C1D\u8BD5\u5C06 person \u5F62\u53C2\u79FB\u51FA personFound(..) \u51FD\u6570\u3002\u8981\u8FBE\u5230\u76EE\u7684\uFF0C\u6211\u4EEC\u9700\u8981\u9996\u5148\u5B9A\u4E49\uFF1A</p><p>function prop(name,obj) { return obj[name]; }</p><p>function setProp(name,obj,val) { var o = Object.assign( {}, obj ); o[name] = val; return o; }</p><p>var extractName = partial( prop, &quot;name&quot; );</p><p>var processPerson = partialRight( getPerson, outputPersonName );</p><p>getLastOrder( function orderFound(order){ processPerson( { id: order.personId } ); } );</p><p>\u4F46\u6211\u4EEC\u9700\u8981\u7EE7\u7EED\u79FB\u9664\u6389 order \u8FD9\u4E2A\u201C\u5F62\u53C2\u201D\u3002\u4E0B\u4E00\u6B65\u662F\u89C2\u5BDF personId \u80FD\u591F\u88AB prop(..) \u4ECE\u4E00\u4E2A\u5BF9\u8C61\uFF08\u6BD4\u5982 order\uFF09\u4E2D\u63D0\u53D6\u51FA\u6765\uFF0C\u5C31\u50CF\u6211\u4EEC\u5728 person \u5BF9\u8C61\u4E2D\u63D0\u53D6 name \u4E00\u6837\u3002</p><p>var extractPersonId = partial( prop, &quot;personId&quot; );</p><p>function makeObjProp(name,value) { return setProp( name, {}, value ); }</p><p>var personData = partial( makeObjProp, &quot;id&quot; );</p><p>\u6570\u636E\u6D41 processPerson &lt;-- personData &lt;-- extractPersonId &lt;-- order</p><p>var lookupPerson = compose( processPerson, personData, extractPersonId );</p><p>\u5B8C\u6574demo</p><p>ar getPerson = partial( ajax, &quot;<a href="http://some.api/person" target="_blank" rel="noopener noreferrer">http://some.api/person</a>&quot; ); var getLastOrder = partial( ajax, &quot;<a href="http://some.api/order" target="_blank" rel="noopener noreferrer">http://some.api/order</a>&quot;, { id: -1 } );</p><p>var extractName = partial( prop, &quot;name&quot; ); var outputPersonName = compose( output, extractName ); var processPerson = partialRight( getPerson, outputPersonName ); var personData = partial( makeObjProp, &quot;id&quot; ); var extractPersonId = partial( prop, &quot;personId&quot; ); var lookupPerson = compose( processPerson, personData, extractPersonId );</p><p>getLastOrder( lookupPerson );</p><p>\u58F0\u660E\u5F0F</p><p>\u65E0\u526F\u4F5C\u7528 \u51CF\u5C11\u526F\u4F5C\u7528</p><p>\u5E42\u7B49</p><p>\u6570\u5B66 \u5D4C\u5957\u8C03\u7528\u4E0D\u6539\u53D8 \u7F16\u7A0B \u76F8\u540C\u8F93\u5165\u8F93\u51FA\u4E0D\u6539\u53D8</p><p>\u63D0\u7EAF</p><p>\u81EA\u7531\u53D8\u91CF\uFF0C\u6784\u5EFA\u4F5C\u7528\u57DF\u9694\u79BB\u81EA\u7531\u53D8\u91CF</p><p>\u7B2C\u4E09\u65B9\u5E93\u63D0\u7EAF</p><p>\u6355\u83B7\u53D7\u5F71\u54CD\u7684\u5F53\u524D\u72B6\u6001 \u8BBE\u7F6E\u521D\u59CB\u8F93\u5165\u72B6\u6001 \u8FD0\u884C\u4E0D\u7EAF\u7684\u51FD\u6570 \u6355\u83B7\u526F\u4F5C\u7528\u72B6\u6001 \u6062\u590D\u539F\u6765\u7684\u72B6\u6001 \u8FD4\u56DE\u6355\u83B7\u7684\u526F\u4F5C\u7528\u72B6\u6001</p><p>function safer_generateMoreRandoms(count,initial) { // (1) \u4FDD\u5B58\u539F\u59CB\u72B6\u6001 var orig = { nums, smallCount, largeCount };</p><pre><code>    // (2) \u8BBE\u7F6E\u521D\u59CB\u526F\u4F5C\u7528\u72B6\u6001
nums = initial.nums.slice();
smallCount = initial.smallCount;
largeCount = initial.largeCount;

    // (3) \u5F53\u5FC3\u6742\u8D28\uFF01
generateMoreRandoms( count );

    // (4) \u6355\u83B7\u526F\u4F5C\u7528\u72B6\u6001
var sides = {
    nums,
    smallCount,
    largeCount
};

    // (5) \u91CD\u65B0\u5B58\u50A8\u539F\u59CB\u72B6\u6001
nums = orig.nums;
smallCount = orig.smallCount;
largeCount = orig.largeCount;

    // (6) \u4F5C\u4E3A\u8F93\u51FA\u76F4\u63A5\u66B4\u9732\u526F\u4F5C\u7528\u72B6\u6001
return sides;
</code></pre><p>}</p><p>\u56DE\u907F\u5F71\u54CD \u5BF9\u8F93\u5165\u503C\u8FDB\u884C\u9002\u5F53\u6DF1\u62F7\u8D1D</p><p>this \u4F7F\u7528\u660E\u663E\u7684\u4E0A\u4E0B\u6587</p><p>var ids = { prefix: &quot;_&quot;, generate() { return this.prefix + Math.random(); } };</p><p>function safer_generate(context) { return ids.generate.call( context ); }</p><p>// *********************</p><p>safer_generate( { prefix: &quot;foo&quot; } );</p><p>\u503C\u7684\u4E0D\u53EF\u53D8\u6027</p><p>\u6BCF\u6B21\u4FEE\u6539\u8FD4\u56DE\u65B0\u503C</p><p>\u5E38\u91CF \u4E00\u4E2A\u65E0\u6CD5\u8FDB\u884C\u91CD\u65B0\u8D4B\u503C\uFF08reassignment\uFF09\u7684\u53D8\u91CF</p><p>\u51BB\u7ED3 var x = Object.freeze( [2] );</p><p>\u6C38\u8FDC\u8003\u8651\u4E00\u4E2A\u503C\u4E0D\u53EF\u53D8</p><p>\u95ED\u5305\u548C\u5BF9\u8C61 \u4E00\u79CD\u4E1C\u897F\u7684\u4E0D\u540C\u8868\u793A\u65B9\u5F0F</p><p>\u95ED\u5305\u5C06\u5355\u4E2A\u51FD\u6570\u4E0E\u4E00\u7CFB\u5217\u72B6\u6001\u7ED3\u5408\u8D77\u6765\uFF0C\u800C\u5BF9\u8C61\u5374\u5728\u4FDD\u6709\u76F8\u540C\u72B6\u6001\u7684\u57FA\u7840\u4E0A\uFF0C\u5141\u8BB8\u4EFB\u610F\u6570\u91CF\u7684\u51FD\u6570\u6765\u64CD\u4F5C\u8FD9\u4E9B\u72B6\u6001\u3002</p><p>\u95ED\u5305\u7ED3\u6784\u4E0D\u53EF\u53D8</p><p>function trackEvent(evt,keypresses = []) { return keypresses.concat( evt ); }</p><p>var keypresses = trackEvent( newEvent1 );</p><p>keypresses = trackEvent( newEvent2, keypresses );</p><p>function trackEvent(evt,keypresses = () =&gt; []) { return function newKeypresses() { return [ ...keypresses(), evt ]; }; }</p><p>var keypresses = trackEvent( newEvent1 );</p><p>keypresses = trackEvent( newEvent2, keypresses )</p><p>\u79C1\u6709 \u95ED\u5305\u66F4\u5F3A</p><p>\u8003\u8651\u8BCD\u6CD5\u95ED\u5305\u9690\u85CF\uFF1A function outer() { var x = 1;</p><pre><code>return function inner(){
    return x;
};
</code></pre><p>}</p><p>var xHidden = outer();</p><p>xHidden(); // 1\u590D\u5236\u4EE3\u7801\u73B0\u5728\u540C\u6837\u7684\u72B6\u6001\u516C\u5F00\uFF1A var xPublic = { x: 1 };</p><p>xPublic.x;</p><p>\u53EF\u89C1\u6027</p><p>function trackEvent( evt, keypresses = { list() { return []; }, forEach() {} } ) { return { list() { return [ ...keypresses.list(), evt ]; }, forEach(fn) { keypresses.forEach( fn ); fn( evt ); } }; }</p><p>// ..</p><p>\u72B6\u6001\u62F7\u8D1D \u5BF9\u8C61</p><p>\u5217\u8868\u64CD\u4F5C</p><p>\u975E\u51FD\u6570\u5F0F</p><p>forEach(..) some(..) every(..)</p><p>//\u5F00\u59CB</p><p>map</p><p>function map(mapperFn,arr) { var newList = [];</p><pre><code>for (let idx = 0; idx &lt; arr.length; idx++) {
	newList.push(
		mapperFn( arr[idx], idx, arr )
	);
}

return newList;
</code></pre><p>}</p><p>var increment = v =&gt; ++v; var decrement = v =&gt; --v; var square = v =&gt; v * v;</p><p>var double = v =&gt; v * 2;</p><p>[increment,decrement,square] .map( fn =&gt; compose( fn, double ) ) .map( fn =&gt; fn( 3 ) ); // [7,5,36]</p><p>\u51FD\u5B50</p><p>function uppercaseLetter(c) { var code = c.charCodeAt( 0 );</p><pre><code>// \u5C0F\u5199\u5B57\u6BCD?
if (code &gt;= 97 &amp;&amp; code &lt;= 122) {
	// \u8F6C\u6362\u4E3A\u5927\u5199!
	code = code - 32;
}

return String.fromCharCode( code );
</code></pre><p>}</p><p>function stringMap(mapperFn,str) { return [...str].map( mapperFn ).join( &quot;&quot; ); }</p><p>stringMap( uppercaseLetter, &quot;Hello World!&quot; ); // \u4F60\u597D\uFF0C\u4E16\u754C!</p><p>\u8FC7\u6EE4\u5668 filter</p><p>var filterIn = filter;</p><p>function filterOut(predicateFn,arr) { return filterIn( not( predicateFn ), arr ); }</p><p>isOdd( 3 ); // true isEven( 2 ); // true</p><p>filterIn( isOdd, [1,2,3,4,5] ); // [1,3,5] filterOut( isEven, [1,2,3,4,5] ); // [1,3,5]</p><p>reduce</p><p>\u4F8B\u5982\uFF0C\u6570\u5B57\u901A\u5E38\u91C7\u7528\u7B97\u672F\u8BA1\u7B97\u5408\u5E76\uFF0C\u5B57\u7B26\u4E32\u91C7\u7528\u62FC\u63A5\u7684\u65B9\u5F0F\u5408\u5E76\uFF0C\u51FD\u6570\u91C7\u7528\u7EC4\u5408\u8C03\u7528\u6765\u5408\u5E76\u3002</p><p>\u5B9E\u73B0 function reduce(reducerFn,initialValue,arr) { var acc, startIdx;</p><pre><code>if (arguments.length == 3) {
	acc = initialValue;
	startIdx = 0;
}
else if (arr.length &gt; 0) {
	acc = arr[0];
	startIdx = 1;
}
else {
	throw new Error( &quot;Must provide at least one value.&quot; );
}

for (let idx = startIdx; idx &lt; arr.length; idx++) {
	acc = reducerFn( acc, arr[idx], idx, arr );
}

return acc;
</code></pre><p>}</p><p>callback \u6267\u884C\u6570\u7EC4\u4E2D\u6BCF\u4E2A\u503C\u7684\u51FD\u6570\uFF0C\u5305\u542B\u56DB\u4E2A\u53C2\u6570\uFF1A accumulator \u7D2F\u8BA1\u5668\u7D2F\u8BA1\u56DE\u8C03\u7684\u8FD4\u56DE\u503C; \u5B83\u662F\u4E0A\u4E00\u6B21\u8C03\u7528\u56DE\u8C03\u65F6\u8FD4\u56DE\u7684\u7D2F\u79EF\u503C\uFF0C\u6216initialValue\uFF08\u89C1\u4E8E\u4E0B\u65B9\uFF09\u3002</p><p>currentValue \u6570\u7EC4\u4E2D\u6B63\u5728\u5904\u7406\u7684\u5143\u7D20\u3002 currentIndex\u53EF\u9009 \u6570\u7EC4\u4E2D\u6B63\u5728\u5904\u7406\u7684\u5F53\u524D\u5143\u7D20\u7684\u7D22\u5F15\u3002 \u5982\u679C\u63D0\u4F9B\u4E86initialValue\uFF0C\u5219\u8D77\u59CB\u7D22\u5F15\u53F7\u4E3A0\uFF0C\u5426\u5219\u4E3A1\u3002 array\u53EF\u9009 \u8C03\u7528reduce()\u7684\u6570\u7EC4 initialValue\u53EF\u9009 \u4F5C\u4E3A\u7B2C\u4E00\u6B21\u8C03\u7528 callback\u51FD\u6570\u65F6\u7684\u7B2C\u4E00\u4E2A\u53C2\u6570\u7684\u503C\u3002 \u5982\u679C\u6CA1\u6709\u63D0\u4F9B\u521D\u59CB\u503C\uFF0C\u5219\u5C06\u4F7F\u7528\u6570\u7EC4\u4E2D\u7684\u7B2C\u4E00\u4E2A\u5143\u7D20\u3002 \u5728\u6CA1\u6709\u521D\u59CB\u503C\u7684\u7A7A\u6570\u7EC4\u4E0A\u8C03\u7528 reduce \u5C06\u62A5\u9519</p><p>map \u4E5F\u662F reduce</p><p>var double = v =&gt; v * 2;</p><p>[1,2,3,4,5].map( double ); // [2,4,6,8,10]</p><p>[1,2,3,4,5].reduce( (list,v) =&gt; ( list.push( double( v ) ), //\u8FD9\u91CC\u662F\u9017\u53F7\u8FD0\u7B97\u7B26\uFF0C\u53EA\u8FD4\u56DE\u6700\u53F3\u8FB9\u7684\u7ED3\u679C list ), [] ); // [2,4,6,8,10]</p><p>filter\u7684reduce\u5B9E\u73B0</p><p>var isOdd = v =&gt; v % 2 == 1;</p><p>[1,2,3,4,5].filter( isOdd ); // [1,3,5]</p><p>[1,2,3,4,5].reduce( (list,v) =&gt; ( isOdd( v ) ? list.push( v ) : undefined, list ), [] ); // [1,3,5]\u3001</p><p>\u53BB\u91CD var unique = arr =&gt; arr.filter( (v,idx) =&gt; arr.indexOf( v ) == idx );</p><p>var unique = arr =&gt; arr.reduce( (list,v) =&gt; list.indexOf( v ) == -1 ? ( list.push( v ), list ) : list , [] );</p><p>\u6241\u5E73\u5316</p><p>var flatten = arr =&gt; arr.reduce( (list,v) =&gt; list.concat( Array.isArray( v ) ? flatten( v ) : v ) , [] );</p><p>var flatten = (arr,depth = Infinity) =&gt; arr.reduce( (list,v) =&gt; list.concat( depth &gt; 0 ? (depth &gt; 1 &amp;&amp; Array.isArray( v ) ? flatten( v, depth - 1 ) : v ) : [v] ) , [] );</p><p>var flatMap = (mapperFn,arr) =&gt; arr.reduce( (list,v) =&gt; list.concat( mapperFn( v ) ) , [] );</p><p>\u65B9\u6CD5\u7EC4\u5408\u7684\u9009\u62E9</p><p>\u94FE\u5F0F\u7EC4\u5408\u65B9\u6CD5 var partialThis = (fn,...presetArgs) =&gt; // \u6545\u610F\u91C7\u7528 function \u6765\u4E3A\u4E86 this \u7ED1\u5B9A function partiallyApplied(...laterArgs){ return fn.apply( this, [...presetArgs, ...laterArgs] ); };</p><p>var composeChainedMethods = (...fns) =&gt; result =&gt; fns.reduceRight( (result,fn) =&gt; fn.call( result ) , result );</p><p>var composeChainedMethods = (...fns) =&gt; result =&gt; fns.reduceRight( (result,fn) =&gt; fn.call( result ) , result );</p><p>composeChainedMethods( partialThis( Array.prototype.reduce, sum, 0 ), partialThis( Array.prototype.map, double ), partialThis( Array.prototype.filter, isOdd ) ) ( [1,2,3,4,5] );</p><p>\u72EC\u7ACB\u7EC4\u5408\u5B9E\u7528\u51FD\u6570 \u67E5\u8BE2\u5217\u8868</p><p>var filter = (arr,predicateFn) =&gt; arr.filter( predicateFn );</p><p>var map = (arr,mapperFn) =&gt; arr.map( mapperFn );</p><p>var reduce = (arr,reducerFn,initialValue) =&gt; arr.reduce( reducerFn, initialValue );</p><p>compose( partialRight( reduce, sum, 0 ), partialRight( map, double ), partialRight( filter, isOdd ) ) ( [1,2,3,4,5] );</p><p>\u5F62\u53C2\u653E\u5728\u6700\u540E</p><p>\u67EF\u7406\u5316\u7EC4\u5408 var filter = curry( (predicateFn,arr) =&gt; arr.filter( predicateFn ) );</p><p>var map = curry( (mapperFn,arr) =&gt; arr.map( mapperFn ) );</p><p>var reduce = curry( (reducerFn,initialValue,arr) =&gt; arr.reduce( reducerFn, initialValue );</p><p>compose( reduce( sum )( 0 ), map( double ), filter( isOdd ) ) ( [1,2,3,4,5] );</p><p>\u72EC\u7ACB\u51FD\u6570\u9002\u914D\u4E3A\u65B9\u6CD5 // \u523B\u610F\u4F7F\u7528\u5177\u540D\u51FD\u6570\u7528\u4E8E\u9012\u5F52\u4E2D\u7684\u8C03\u7528 function flattenReducer(list,v) { return list.concat( Array.isArray( v ) ? v.reduce( flattenReducer, [] ) : v ); }</p><p>[ [1, 2, 3], 4, 5, [6, [7, 8]] ] .reduce( flattenReducer, [] )</p><p>\u65B9\u6CD5\u9002\u914D\u72EC\u7ACB</p><p>var unboundMethod = (methodName,argCount = 2) =&gt; curry( (...args) =&gt; { var obj = args.pop(); return obj<a href="...args">methodName</a>; }, argCount );</p><p>var filter = unboundMethod( &quot;filter&quot;, 2 ); var map = unboundMethod( &quot;map&quot;, 2 ); var reduce = unboundMethod( &quot;reduce&quot;, 3 );</p><p>compose( reduce( sum )( 0 ), map( double ), filter( isOdd ) ) ( [1,2,3,4,5] );</p><p>\uFF01=null</p><p>var guard = fn =&gt; arg =&gt; arg != null ? fn( arg ) : arg;</p><p>\u67E5\u8BE2\u5217\u8868</p><p>\u878D\u5408</p><p>someList .filter(..) .filter(..) .map(..) .map(..) .map(..) .reduce(..);</p><p>map( fn3, map( fn2, map( fn1, someList ) ) );</p><p>\u5B83\u7684\u4E0D\u8DB3\u4E4B\u5904\u5728\u4E8E\u6BCF\u4E00\u4E2A\u5217\u8868\u64CD\u4F5C\u90FD\u9700\u8981\u5FAA\u73AF\u6574\u4E2A\u5217\u8868\uFF0C\u610F\u5473\u7740\u4E0D\u5FC5\u8981\u7684\u6027\u80FD\u635F\u5931\uFF0C\u7279\u522B\u662F\u5728\u5217\u8868\u975E\u5E38\u957F\u7684\u65F6\u5019\u3002</p><p>\u6539\u8FDB</p><p>words .map( compose( elide, upper, removeInvalidChars ) ); // [&quot;MR&quot;,&quot;JONES&quot;,&quot;ISNT&quot;,&quot;RESPONS...&quot;,&quot;FOR&quot;,&quot;THIS&quot;,&quot;DISASTER&quot;]</p><p>\u5217\u8868\u4E4B\u5916 demo</p><p>var getSessionId = partial( prop, &quot;sessId&quot; ); var getUserId = partial( prop, &quot;uId&quot; );</p><p>var session, sessionId, user, userId, orders;</p><p>session = getCurrentSession(); if (session != null) sessionId = getSessionId( session ); if (sessionId != null) user = lookupUser( sessionId ); if (user != null) userId = getUserId( user ); if (userId != null) orders = lookupOrders( userId ); if (orders != null) processOrders( orders );</p><p>\u9996\u5148\uFF0C\u6211\u4EEC\u53EF\u4EE5\u6CE8\u610F\u5230\u58F0\u660E\u548C\u8FD0\u884C\u524D\u7684\u4E00\u7CFB\u5217 If \u8BED\u53E5\u786E\u4FDD\u4E86\u7531 getCurrentSession()\u3001getSessionId(..)\u3001lookupUser(..)\u3001getUserId(..)\u3001lookupOrders(..) \u548C processOrders(..) \u8FD9\u516D\u4E2A\u51FD\u6570\u7EC4\u5408\u8C03\u7528\u65F6\u7684\u6709\u6548\u3002\u7406\u60F3\u5730\uFF0C\u6211\u4EEC\u671F\u671B\u6446\u8131\u8FD9\u4E9B\u53D8\u91CF\u5B9A\u4E49\u548C\u547D\u4EE4\u5F0F\u7684\u6761\u4EF6\u3002</p><p>\u62BD\u8C61\u51FA!=null var guard = fn =&gt; arg =&gt; arg != null ? fn( arg ) : arg;</p><p>[ getSessionId, lookupUser, getUserId, lookupOrders, processOrders ] .map( guard )</p><p>.reduce( (result,nextFn) =&gt; nextFn( result ) , getCurrentSession() )</p><p>[ &quot;sessId&quot;, &quot;uId&quot; ].map( propName =&gt; partial( prop, propName ) )</p><p>var mergeReducer = (merged,v,idx) =&gt; (merged.splice( idx * 2, 0, v ), merged);</p><p>[ &quot;sessId&quot;, &quot;uId&quot; ].map( propName =&gt; partial( prop, propName ) ) .reduce( mergeReducer, [ lookupUser ] ) .concat( lookupOrders, processOrders ) .map( guard ) .reduce( (result,nextFn) =&gt; nextFn( result ) , getCurrentSession() );</p><p>\u9012\u5F52</p><p>Ramda\u5E93</p><p>\u6682\u65F6\u53EF\u4EE5\u7528lodash</p>`,264),o=[a];function s(u,i,l,d,c,g){return t(),e("div",null,o)}var m=r(n,[["render",s]]);export{v as __pageData,m as default};

(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{333:function(t,e,s){"use strict";s.r(e);var a=s(28),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"url编码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url编码"}},[t._v("#")]),t._v(" URL编码")]),t._v(" "),s("h2",{attrs:{id:"原因"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#原因"}},[t._v("#")]),t._v(" 原因")]),t._v(" "),s("p",[t._v("一些字符会引起歧义，需要特殊机制表示它们的含义，转义字符就是一个常见的方法，把源字符转义这一过程被称为编码，反过程被称为解码，"),s("strong",[t._v("这个过程注意点是知道哪些字符需要转义的，下面根据规范展开这部分")])]),t._v(" "),s("h2",{attrs:{id:"保留字符与未保留字符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#保留字符与未保留字符"}},[t._v("#")]),t._v(" 保留字符与未保留字符")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://datatracker.ietf.org/doc/rfc3986/?include_text=1",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC3986文档规定(第二章字符)，Url中只允许包含未保留字符以及所有保留字符。"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("strong",[t._v("保留字符")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("保留字符")]),t._v(" "),s("th",[t._v("含义")]),t._v(" "),s("th",[t._v("例子")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v(": / ? # [] @")]),t._v(" "),s("td",[t._v("分隔Url的协议、主机、路径等组件。比如：冒号:保留为方案、用户/口令，以及主机/端口组件的定界符使用；/保留为路径组件中分隔路径段的定界符；? 保留作为查询字符串定界符使用；#保留为分段定界符使用")]),t._v(" "),s("td",[t._v("encodeURI(' : / ? # []  @')  \": / ?#%5B%5D@\"其中[]被转义，因为它们是不安全字符")])]),t._v(" "),s("tr",[s("td",[t._v("!$&'()*+,;=")]),t._v(" "),s("td",[t._v("用于在每个组件中起到分隔作用的。比如：&符号用于分隔查询多个键值对；=用于表示查询参数中的键值对。")]),t._v(" "),s("td",[t._v('encodeURI("! $ & \' () * + ,; =") // "!$&\'()*+,;="')])])])]),t._v(" "),s("p",[s("strong",[t._v("未保留字符")])]),t._v(" "),s("p",[t._v("英文字母（a-zA-Z）、数字（0-9）、-_.~ 4个特殊字符")]),t._v(" "),s("p",[s("strong",[t._v("未保留字符不需要编码")])]),t._v(" "),s("p",[s("strong",[t._v("小结")])]),t._v(" "),s("p",[t._v("保留字符是指用作特殊用途，而未保留字符是指规范允许使用但是没纳入规范")]),t._v(" "),s("h2",{attrs:{id:"需要编码的字符"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#需要编码的字符"}},[t._v("#")]),t._v(" 需要编码的字符")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("受限字符")]),t._v(" "),s("th",[t._v("为何受限")]),t._v(" "),s("th",[t._v("例子")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("%")]),t._v(" "),s("td",[t._v("作为编码字符的转义标志，因此本身需要编码")]),t._v(" "),s("td",[t._v("encodeURI('%') // \"%25\"")])]),t._v(" "),s("tr",[s("td",[t._v("空格")]),t._v(" "),s("td",[t._v("Url在传输的过程，或者用户在排版的过程，或者文本处理程序在处理Url的过程，都有可能引入无关紧要的空格，或者将那些有意义的空格给去掉。")]),t._v(" "),s("td",[t._v("encodeURI(' ') // \"%20\"")])]),t._v(" "),s("tr",[s("td",[t._v('<>"')]),t._v(" "),s("td",[t._v("尖括号和引号通常用于在普通文本中起到分隔Url的作用，所以应该对其进行编码")]),t._v(" "),s("td",[t._v('encodeURI(\'<>"\') // "%3C%3E%22"')])]),t._v(" "),s("tr",[s("td",[t._v("{}|^~[]'")]),t._v(" "),s("td",[t._v("某一些网关或者传输代理会篡改这些字符。你可能会感到奇怪，为什么使用一些不安全字符的时候并没有发生什么不好的事情，比如无需对~字符进行编码，前面也说了，对某些传输协议来说不是问题。")]),t._v(" "),s("td",[t._v('encodeURI("{}')])]),t._v(" "),s("tr",[s("td",[t._v("0x00-0x1F, 0x7F")]),t._v(" "),s("td",[t._v("受限，这些十六进制范围内的字符都在US-ASCII字符集的不可打印区间内")]),t._v(" "),s("td",[t._v("比如换行键是0x0A")])]),t._v(" "),s("tr",[s("td",[t._v(">0x7F")]),t._v(" "),s("td",[t._v("受限，十六进制值在此范围内的字符都不在US-ASCII字符集的7比特范围内")]),t._v(" "),s("td",[t._v("encodeURI('京东') // \"%E4%BA%AC%E4%B8%9C\"")])])])]),t._v(" "),s("h2",{attrs:{id:"内置编码方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内置编码方法"}},[t._v("#")]),t._v(" 内置编码方法")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("escape unescape")]),t._v(" "),s("p",[t._v("此解码/编码方法已经从Web标准中删除，不再推荐使用")]),t._v(" "),s("p",[t._v("字符的16进制格式值,当该值小于等于0xFF时,用一个2位转移序列: %xx 表示. 大于的话则使用4位序列:%uxxxx 表示，而新的编码方法统一表示成URL编码（UTF-8）")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("escape")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"中"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "%u4E2D"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURI")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"中"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "%E4%B8%AD"')]),t._v("\n")])])]),s("h3",{attrs:{id:"encodeuri与encodeuricomponent-区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#encodeuri与encodeuricomponent-区别"}},[t._v("#")]),t._v(" encodeURI与encodeURIComponent 区别")]),t._v(" "),s("p",[t._v("encodeURIComponent 假定参数是 URI 的一部分（比如协议、主机名、路径或查询字符串）。因此 encodeURIComponent() 函数将转义用于分隔 URI 各个部分的标点符号（; / ?: @&=+$,#），所以encodeURIComponent的不编码集只有71个，此时URI由于分割URI的标点符号被转义，会导致此URL无法使用")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURIComponent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://aotu.io/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "https%3A%2F%2Faotu.io%2F"  此时无法访问')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURI")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://aotu.io/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "https://aotu.io/"')]),t._v("\n")])])]),s("p",[t._v("所以encodeURI由于编码URL整体，而encodeURIComponent用于编码URL局部，这个局部的判定就是需要转义的部分")]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("encodeURI可以用于对整个URI进行编码，而encodeURIComponent只对于URI局部歧义部分进行编码")])])}),[],!1,null,null,null);e.default=n.exports}}]);
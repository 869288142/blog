(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{240:function(s,t,a){"use strict";a.r(t);var n=a(28),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"错误处理机制-异常"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#错误处理机制-异常"}},[s._v("#")]),s._v(" 错误处理机制-异常")]),s._v(" "),a("p",[s._v("程序的错误处理，在我们编写代码时很容易被忽略，其实它还是比较重要的。")]),s._v(" "),a("h2",{attrs:{id:"为什么程序需要一个异常机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么程序需要一个异常机制"}},[s._v("#")]),s._v(" 为什么程序需要一个异常机制")]),s._v(" "),a("p",[a("strong",[s._v("没有异常的时候，程序出错会怎么样?")]),s._v(" "),a("strong",[s._v("一旦出错，系统会整个崩溃，会导致以下两个子问题")])]),s._v(" "),a("p",[s._v("1.出错整个程序就瘫痪了")]),s._v(" "),a("p",[s._v("2.没法得知错误具体信息")]),s._v(" "),a("p",[s._v("这点是最为重要的，还记得我们平时怎么排查错误的吗，就是读取错误信息找到错误代码")]),s._v(" "),a("h3",{attrs:{id:"处理异常情况，恢复运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#处理异常情况，恢复运行"}},[s._v("#")]),s._v(" 处理异常情况，恢复运行")]),s._v(" "),a("p",[s._v("可以做到尽"),a("strong",[s._v("可能在出错的时候去处理这个错误")]),s._v("，告诉"),a("strong",[s._v("系统可以继续运行，并且把错误信息尽可能告知我们")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'出错'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'捕获到了异常'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'系统继续运行'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//这里会被运行")]),s._v("\n")])])]),a("p",[s._v("异常除了让程序不至于整体崩溃，还回答了三个问题：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("什么出了错 错误堆栈")])]),s._v(" "),a("li",[a("p",[s._v("在哪出的错 错误堆栈")])]),s._v(" "),a("li",[a("p",[s._v("为什么出错 message")])])]),s._v(" "),a("h3",{attrs:{id:"js现有错误类型："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#js现有错误类型："}},[s._v("#")]),s._v(" js现有错误类型：")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("Error \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 顶级父类 通常作为自定义异常父类使用")]),s._v("\n\nEvalError \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 没有把eval当成函数调用，就会出错 eg: new eval eval由于性能非常之低，使用需要十分谨慎")]),s._v("\n\nRangeError\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 数值超出范围 let items = new Array(Number.MAX_VALUE)")]),s._v("\n\nReferenceError 常见\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 访问不存在的变量 let obj = x")]),s._v("\n\nSyntaxError 常见\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 语法上不正确")]),s._v("\n\nTypeError 常见\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//  被操作数的类型不满足此操作 eg: let obj = new 10")]),s._v("\n\nURIError\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// encodeURI()或decodeURI() URL不符合规范时报错")]),s._v("\n")])])]),a("h2",{attrs:{id:"捕获异常"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#捕获异常"}},[s._v("#")]),s._v(" 捕获异常")]),s._v(" "),a("p",[s._v("捕获错误的目的在于避免浏览器以默认方式处理它们")]),s._v(" "),a("p",[s._v("try-catch-finally")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 可能发生异常的代码")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("someFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("instanceof")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TypeError")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理类型错误")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("instanceof")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ReferenceError")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理引用错误")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理其他错误")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("finally")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 始终要做的 比如关闭数据库连接")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"抛出异常"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#抛出异常"}},[s._v("#")]),s._v(" 抛出异常")]),s._v(" "),a("p",[s._v("抛出错误的目的在于提供错误发生具体原因的消息，在程序不能处理现场时，抛出异常通知程序")]),s._v(" "),a("p",[s._v("抛出错误: throw obj (obj istanceof Error) 通常采用Error子类")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("MyError")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" message\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyError")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prototype "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyError")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'我定义的错误'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);
# 渲染机制

## 渲染过程

整个渲染结果如下，可以使用**谷歌的performance来证明以下的步骤和顺序**

* 解析内容

  * 解析html文件会产生一个DOM Tree。

  * 解析CSS会生成CSSDOM。

  * Javascript，运行脚本，主要是通过DOM API和CSS API来操作DOM Tree和CSS Rule Tree.

* DOM 和 CSSDOM 都构建完成后，然后构造 Rendering Tree。

* 布局（layout）render tree 然后去绘制（paint）render tree

* 最后通过调用操作系统GUI的API绘制。


## 渲染阻塞

### CSS

* CSS不会阻塞DOM解析

* CSS会阻塞DOM渲染

* CSS阻塞JS执行

以上可以得到**CSS要放到头部的优化理论**，因为如果只有DOM和CSS，浏览器会并行解析他们，如果含有js，提前加载CSS也减少了阻塞DOM渲染的可能性

### JS

* JS阻塞DOM解析

* JS阻塞DOM渲染


## 渲染事件

### DOMContentLoaded

DOM解析完成后触发


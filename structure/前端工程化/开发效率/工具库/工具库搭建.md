# 工具库搭建

## 打包工具 - RollupJS

* 更优化的代码预编译优化(Tree Shaking、Scope Hoisting)

* config修改自动reload

* 方便输出多个格式


### 集成TS

```shell
npm i -D typescript
npm i -D rollup-plugin-typescript2
npm i -D tslib
```

### 配置`tsconfig.json`
```js
{

}
```

### 集成babel

```shell
npm install @rollup/plugin-babel --save-dev
npm i -D @babel/core
npm i -D @babel/preset-env
```

**babel.config.js**
```js
module.exports = {
  presets: ["@babel/preset-env"],
  plugins: [
    [
      "@babel/plugin-transform-runtime",
      {
        corejs: 2,
      },
    ],
  ],
};
```

### 支持引入外部模块

```js
import { nodeResolve } from '@rollup/plugin-node-resolve';
import commonjs from '@rollup/plugin-commonjs';

export default {
  plugins: [nodeResolve(), commonjs()]
};
```

### 风格

```shell
npm i -D rollup-plugin-eslint 
eslint --init   
```

### 代码压缩

```shell
npm i rollup-plugin-terser --save-dev
```

### 单元测试

```shell
npm install --save-dev jest 
 ts-jest @types/jest

npx ts-jest config:init
```

```js
"scripts": {
  "test": "jest",
},
```

// 文件清除
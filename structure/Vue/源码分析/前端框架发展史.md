# 前端框架发展史

### 兼容性-JQuery

在`JQuery`出现之前，当时的浏览器操作`DOM`和`事件`的接口很多是不同的，遗留到现在比较常见的例子有：

**绑定事件**

```js
function addEvent(obj, type, fn, useCapTure) {
    if (obj.addEventListener) {
        obj.addEventListener(type, fn, useCapTure)
    } else {
        obj.attachEvent("on" + type, fn)
    }
}
```

**获取样式**

```js
 function getStyle(obj, attr) {
    // 非ie,google,火狐
    if (window.getComputedStyle) {
        return window.getComputedStyle(obj, null)[attr];
    }
    //ie 6 8 9
    return obj.currentStyle[attr];
 }
```

上述2个实例使用`JQuery`代码如下：

**绑定事件**

```js
$(selector).on(type, callback)
```

**获取样式**

```js
$(selector).css(name)
```

从`JQuery`和原生代码的实现来看，其代码简洁度显而易见少很多，**更重要的是开发者完全不用在写代码时，考虑特定浏览器某个API的兼容性**

### MVC框架-AngularJS

在web应用逐渐诞生出富应用这个名词之后，我们的前端代码不断增加，这个时候`Angular`基于常见的`MVC`架构推出了，在`Angular`诞生之前，我们的代码一般都是这样的，以`JQuery`为例：

**JQuery实现**

``` html
<!doctype html>
<html>
  <head>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
  </head>
  <body>
    <div>
      <b>订单:</b>
      <div>
        数量: <input id='count' type="number"  required >
      </div>
      <div>
        单价: <input id='cost' type="number"  required >
      </div>
      <div>
        <b>总价:</b>
        <span id="allCost"></span>
        <button class="btn">支付</button>
      </div>
    </div>
  </body>
  <script>
      const $count = $('#count')
      const $cost = $('#cost')

      function genAllCost() {
        $('#allCost').text($count.val() *  $cost.val())
      }

      $count.val('1').on('change', function () {
        genAllCost()
      })

      $cost.val('2').on('change',  function () { 
        genAllCost()
      })
      genAllCost()
   
  </script>
</html>
```

**AngularJS实现**

**view-index.html**

```html
<!doctype html>
<html ng-app="invoice2">
  <head>
    <script src="http://code.angularjs.org/1.2.25/angular.min.js"></script>
    <script src="finance2.js"></script>
    <script src="invoice2.js"></script>
  </head>
  <body>
    <div ng-controller="InvoiceController as invoice">
      <b>订单:</b>
      <div>
        数量: <input type="number" ng-model="invoice.qty" required >
      </div>
      <div>
        单价: <input type="number" ng-model="invoice.cost" required >
        <select ng-model="invoice.inCurr">
          <option ng-repeat="c in invoice.currencies">{{c}}</option>
        </select>
      </div>
      <div>
        <b>总价:</b>
        <span >{{invoice.total('USD')}}</span>
        <button class="btn" ng-click="invoice.pay()">支付</button>
      </div>
    </div>
  </body>
</html>
```

**ctroller-invoice2.js**

```js
angular.module('invoice2', ['finance2'])
  .controller('InvoiceController', ['currencyConverter', function(currencyConverter) {
    this.qty = 1;
    this.cost = 2;
    this.inCurr = 'EUR';
    this.currencies = currencyConverter.currencies;
 
    this.total = function total(outCurr) {
      return currencyConverter.convert(this.qty * this.cost, this.inCurr, outCurr);
    };
    this.pay = function pay() {
      window.alert("谢谢！");
    };
  }]);
```

**service-finance2.js**

```js
angular.module('finance2', [])
  .factory('currencyConverter', function() {
    var currencies = ['USD', 'EUR', 'CNY'],
        usdToForeignRates = {
      USD: 1,
      EUR: 0.74,
      CNY: 6.09
    };
    return {
      currencies: currencies,
      convert: convert
    };
 
    function convert(amount, inCurr, outCurr) {
      return amount * usdToForeignRates[outCurr] * 1 / usdToForeignRates[inCurr];
    }
});
```


通过`AngularJS`与`JQuery`的对比,可以得出`AngularJS`以下优势：

* **基于`MVC`架构，每层都是单一职责，便于维护**

* **从面向`DOM`的思维转变到了面向数据源的思维**












## 参考文章

[jQuery和React实现对比](https://segmentfault.com/a/1190000003501752#comment-area)